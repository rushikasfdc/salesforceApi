import _Reflect$construct from "@babel/runtime-corejs3/core-js-stable/reflect/construct";
import _Object$getOwnPropertySymbols from "@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols";
import _filterInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/filter";
import _Object$getOwnPropertyDescriptor from "@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor";
import _forEachInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/for-each";
import _Object$getOwnPropertyDescriptors from "@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors";
import _Object$defineProperties from "@babel/runtime-corejs3/core-js-stable/object/define-properties";
import _Object$defineProperty from "@babel/runtime-corejs3/core-js-stable/object/define-property";
import _sliceInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/slice";
import _Array$from from "@babel/runtime-corejs3/core-js-stable/array/from";
import _Symbol from "@babel/runtime-corejs3/core-js-stable/symbol";
import _getIteratorMethod from "@babel/runtime-corejs3/core-js/get-iterator-method";
import _slicedToArray from "@babel/runtime-corejs3/helpers/slicedToArray";
import _objectWithoutProperties from "@babel/runtime-corejs3/helpers/objectWithoutProperties";
import _asyncToGenerator from "@babel/runtime-corejs3/helpers/asyncToGenerator";
import _defineProperty from "@babel/runtime-corejs3/helpers/defineProperty";
import _typeof from "@babel/runtime-corejs3/helpers/typeof";
import _createClass from "@babel/runtime-corejs3/helpers/createClass";
import _classCallCheck from "@babel/runtime-corejs3/helpers/classCallCheck";
import _possibleConstructorReturn from "@babel/runtime-corejs3/helpers/possibleConstructorReturn";
import _getPrototypeOf from "@babel/runtime-corejs3/helpers/getPrototypeOf";
import _inherits from "@babel/runtime-corejs3/helpers/inherits";
import _wrapNativeSuper from "@babel/runtime-corejs3/helpers/wrapNativeSuper";
var _excluded = ["pollInterval", "pollTimeout", "input"],
  _excluded2 = ["Id", "type", "attributes"];
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof _Symbol !== "undefined" && _getIteratorMethod(o) || o["@@iterator"]; if (!it) { if (_Array$isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { var _context29; if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = _sliceInstanceProperty(_context29 = Object.prototype.toString.call(o)).call(_context29, 8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return _Array$from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function ownKeys(e, r) { var t = _Object$keys2(e); if (_Object$getOwnPropertySymbols) { var o = _Object$getOwnPropertySymbols(e); r && (o = _filterInstanceProperty(o).call(o, function (r) { return _Object$getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var _context27, _context28; var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? _forEachInstanceProperty(_context27 = ownKeys(Object(t), !0)).call(_context27, function (r) { _defineProperty(e, r, t[r]); }) : _Object$getOwnPropertyDescriptors ? _Object$defineProperties(e, _Object$getOwnPropertyDescriptors(t)) : _forEachInstanceProperty(_context28 = ownKeys(Object(t))).call(_context28, function (r) { _Object$defineProperty(e, r, _Object$getOwnPropertyDescriptor(t, r)); }); } return e; }
import _regeneratorRuntime from "@babel/runtime-corejs3/regenerator";
import _Array$isArray from "@babel/runtime-corejs3/core-js-stable/array/is-array";
import _includesInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/includes";
import _JSON$stringify from "@babel/runtime-corejs3/core-js-stable/json/stringify";
import _Date$now from "@babel/runtime-corejs3/core-js-stable/date/now";
import _concatInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/concat";
import _URL from "@babel/runtime-corejs3/core-js-stable/url";
import _Promise from "@babel/runtime-corejs3/core-js-stable/promise";
import _Object$keys2 from "@babel/runtime-corejs3/core-js-stable/object/keys";
import _setTimeout from "@babel/runtime-corejs3/core-js-stable/set-timeout";
import "core-js/modules/es.error.cause.js";
import "core-js/modules/es.array.iterator.js";
import "core-js/modules/es.array.push.js";
import "core-js/modules/es.function.name.js";
import "core-js/modules/es.map.js";
import "core-js/modules/es.object.keys.js";
import "core-js/modules/es.object.to-string.js";
import "core-js/modules/es.regexp.exec.js";
import "core-js/modules/es.regexp.test.js";
import "core-js/modules/es.regexp.to-string.js";
import "core-js/modules/es.set.js";
import "core-js/modules/web.dom-exception.constructor.js";
import "core-js/modules/web.dom-exception.stack.js";
import "core-js/modules/web.dom-exception.to-string-tag.js";
import "core-js/modules/web.structured-clone.js";
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? _Reflect$construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(_Reflect$construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
import { EventEmitter } from 'events';
import { Writable } from 'stream';
import { Serializable, Parsable } from '../record-stream';
import HttpApi from '../http-api';
import { registerModule } from '../jsforce';
import { getLogger } from '../util/logger';
import { concatStreamsAsDuplex } from '../util/stream';
import is from '@sindresorhus/is';
var JobPollingTimeoutError = /*#__PURE__*/function (_Error) {
  /**
   *
   */
  function JobPollingTimeoutError(message, jobId) {
    var _this;
    _classCallCheck(this, JobPollingTimeoutError);
    _this = _callSuper(this, JobPollingTimeoutError, [message]);
    _this.name = 'JobPollingTimeout';
    _this.jobId = jobId;
    return _this;
  }
  _inherits(JobPollingTimeoutError, _Error);
  return _createClass(JobPollingTimeoutError);
}( /*#__PURE__*/_wrapNativeSuper(Error));
var BulkApiV2 = /*#__PURE__*/function (_HttpApi) {
  function BulkApiV2() {
    _classCallCheck(this, BulkApiV2);
    return _callSuper(this, BulkApiV2, arguments);
  }
  _inherits(BulkApiV2, _HttpApi);
  return _createClass(BulkApiV2, [{
    key: "hasErrorInResponseBody",
    value: function hasErrorInResponseBody(body) {
      return _Array$isArray(body) && _typeof(body[0]) === 'object' && 'errorCode' in body[0];
    }
  }, {
    key: "isSessionExpired",
    value: function isSessionExpired(response) {
      var _context;
      return response.statusCode === 401 && _includesInstanceProperty(_context = response.body).call(_context, 'INVALID_SESSION_ID');
    }
  }, {
    key: "parseError",
    value: function parseError(body) {
      return {
        errorCode: body[0].errorCode,
        message: body[0].message
      };
    }
  }]);
}(HttpApi);
export var BulkV2 = /*#__PURE__*/function () {
  function BulkV2(connection) {
    _classCallCheck(this, BulkV2);
    /**
     * Polling interval in milliseconds
     *
     * Default: 1000 (1 second)
     */
    _defineProperty(this, "pollInterval", 1000);
    /**
     * Polling timeout in milliseconds
     *
     * Default: 30000 (30 seconds)
     */
    _defineProperty(this, "pollTimeout", 30000);
    this.connection = connection;
    this.logger = this.connection._logLevel ? getLogger('bulk2').createInstance(this.connection._logLevel) : getLogger('bulk2');
  }

  /**
   * Create an instance of an ingest job object.
   *
   * @params {NewIngestJobOptions} options object
   * @returns {IngestJobV2} An ingest job instance
   * @example
   * // Upsert records to the Account object.
   *
   * const job = connection.bulk2.createJob({
   *   operation: 'insert'
   *   object: 'Account',
   * });
   *
   * // create the job in the org
   * await job.open()
   *
   * // upload data
   * await job.uploadData(csvFile)
   *
   * // finished uploading data, mark it as ready for processing
   * await job.close()
   */
  return _createClass(BulkV2, [{
    key: "createJob",
    value: function createJob(options) {
      return new IngestJobV2(this.connection, {
        bodyParams: options,
        pollingOptions: this
      });
    }

    /**
     * Get an ingest or query job instance specified by a given job ID
     *
     * @param options Options object with a job ID
     * @returns IngestJobV2 An ingest job
     */
  }, {
    key: "job",
    value: function job() {
      var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'ingest';
      var options = arguments.length > 1 ? arguments[1] : undefined;
      if (type === 'ingest') {
        return new IngestJobV2(this.connection, {
          id: options.id,
          pollingOptions: this
        });
      } else {
        return new QueryJobV2(this.connection, {
          id: options.id,
          pollingOptions: this
        });
      }
    }

    /**
     * Create, upload, and start bulkload job
     */
  }, {
    key: "loadAndWaitForResults",
    value: (function () {
      var _loadAndWaitForResults = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(options) {
        var pollInterval, pollTimeout, input, createJobOpts, job, err;
        return _regeneratorRuntime.wrap(function _callee$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              if (!options.pollTimeout) options.pollTimeout = this.pollTimeout;
              if (!options.pollInterval) options.pollInterval = this.pollInterval;
              pollInterval = options.pollInterval, pollTimeout = options.pollTimeout, input = options.input, createJobOpts = _objectWithoutProperties(options, _excluded);
              job = this.createJob(createJobOpts);
              _context2.prev = 4;
              _context2.next = 7;
              return job.open();
            case 7:
              _context2.next = 9;
              return job.uploadData(input);
            case 9:
              _context2.next = 11;
              return job.close();
            case 11:
              _context2.next = 13;
              return job.poll(pollInterval, pollTimeout);
            case 13:
              _context2.next = 15;
              return job.getAllResults();
            case 15:
              return _context2.abrupt("return", _context2.sent);
            case 18:
              _context2.prev = 18;
              _context2.t0 = _context2["catch"](4);
              err = _context2.t0;
              this.logger.error("bulk load failed due to: ".concat(err.message));
              if (err.name !== 'JobPollingTimeoutError') {
                // fires off one last attempt to clean up and ignores the result | error
                job.delete().catch(function (ignored) {
                  return ignored;
                });
              }
              throw err;
            case 24:
            case "end":
              return _context2.stop();
          }
        }, _callee, this, [[4, 18]]);
      }));
      function loadAndWaitForResults(_x) {
        return _loadAndWaitForResults.apply(this, arguments);
      }
      return loadAndWaitForResults;
    }()
    /**
     * Execute bulk query and get a record stream.
     *
     * Default timeout: 10000ms
     *
     * @param soql SOQL query
     * @param options
     *
     * @returns {RecordStream} - Record stream, convertible to a CSV data stream
     */
    )
  }, {
    key: "query",
    value: (function () {
      var _query = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(soql, options) {
        var queryJob, recordStream, dataStream, queryRecordsStream, err;
        return _regeneratorRuntime.wrap(function _callee2$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              queryJob = new QueryJobV2(this.connection, {
                bodyParams: {
                  query: soql,
                  operation: options !== null && options !== void 0 && options.scanAll ? 'queryAll' : 'query',
                  columnDelimiter: options === null || options === void 0 ? void 0 : options.columnDelimiter,
                  lineEnding: options === null || options === void 0 ? void 0 : options.lineEnding
                },
                pollingOptions: this
              });
              recordStream = new Parsable();
              dataStream = recordStream.stream('csv');
              _context3.prev = 3;
              _context3.next = 6;
              return queryJob.open();
            case 6:
              _context3.next = 8;
              return queryJob.poll(options === null || options === void 0 ? void 0 : options.pollInterval, options === null || options === void 0 ? void 0 : options.pollTimeout);
            case 8:
              _context3.next = 10;
              return queryJob.result().then(function (s) {
                return s.stream();
              });
            case 10:
              queryRecordsStream = _context3.sent;
              queryRecordsStream.pipe(dataStream);
              _context3.next = 20;
              break;
            case 14:
              _context3.prev = 14;
              _context3.t0 = _context3["catch"](3);
              err = _context3.t0;
              this.logger.error("bulk query failed due to: ".concat(err.message));
              if (err.name !== 'JobPollingTimeoutError') {
                // fires off one last attempt to clean up and ignores the result | error
                queryJob.delete().catch(function (ignored) {
                  return ignored;
                });
              }
              throw err;
            case 20:
              return _context3.abrupt("return", recordStream);
            case 21:
            case "end":
              return _context3.stop();
          }
        }, _callee2, this, [[3, 14]]);
      }));
      function query(_x2, _x3) {
        return _query.apply(this, arguments);
      }
      return query;
    }())
  }]);
}();
export var QueryJobV2 = /*#__PURE__*/function (_EventEmitter) {
  function QueryJobV2(conn, options) {
    var _this2;
    _classCallCheck(this, QueryJobV2);
    _this2 = _callSuper(this, QueryJobV2);
    _this2.connection = conn;
    _this2.logger = _this2.connection._logLevel ? getLogger('bulk2:QueryJobV2').createInstance(_this2.connection._logLevel) : getLogger('bulk2:QueryJobV2');
    if ('id' in options) {
      _this2._id = options.id;
    } else {
      _this2.bodyParams = options.bodyParams;
    }
    _this2.pollingOptions = options.pollingOptions;
    // default error handler to keep the latest error
    _this2.on('error', function (error) {
      return _this2.error = error;
    });
    return _this2;
  }

  /**
   * Get the query job ID.
   *
   * @returns {string} query job Id.
   */
  _inherits(QueryJobV2, _EventEmitter);
  return _createClass(QueryJobV2, [{
    key: "id",
    get: function get() {
      return this.jobInfo ? this.jobInfo.id : this._id;
    }

    /**
     * Get the query job info.
     *
     * @returns {Promise<QueryJobInfoV2>} query job information.
     */
  }, {
    key: "getInfo",
    value: function getInfo() {
      if (this.jobInfo) {
        return this.jobInfo;
      }
      throw new Error('No internal job info. Make sure to call `await job.check`.');
    }

    /**
     * Creates a query job
     *
     * @returns {Promise<QueryJobInfoV2>} job information.
     */
  }, {
    key: "open",
    value: (function () {
      var _open = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {
        return _regeneratorRuntime.wrap(function _callee3$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              if (this.bodyParams) {
                _context4.next = 2;
                break;
              }
              throw new Error('Missing required body params to open a new query job.');
            case 2:
              _context4.prev = 2;
              _context4.next = 5;
              return this.createQueryRequest({
                method: 'POST',
                body: _JSON$stringify(this.bodyParams),
                headers: {
                  'Content-Type': 'application/json; charset=utf-8'
                },
                responseType: 'application/json'
              });
            case 5:
              this.jobInfo = _context4.sent;
              this.logger.debug("Successfully created job ".concat(this.id));
              this.emit('open', this.jobInfo);
              _context4.next = 14;
              break;
            case 10:
              _context4.prev = 10;
              _context4.t0 = _context4["catch"](2);
              this.emit('error', _context4.t0);
              throw _context4.t0;
            case 14:
              return _context4.abrupt("return", this.jobInfo);
            case 15:
            case "end":
              return _context4.stop();
          }
        }, _callee3, this, [[2, 10]]);
      }));
      function open() {
        return _open.apply(this, arguments);
      }
      return open;
    }()
    /**
     * Abort the job
     *
     * The 'aborted' event is emitted when the job successfully aborts.
     * @returns {Promise<QueryJobInfoV2>} job information.
     */
    )
  }, {
    key: "abort",
    value: (function () {
      var _abort = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {
        var state;
        return _regeneratorRuntime.wrap(function _callee4$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              _context5.prev = 0;
              state = 'Aborted';
              _context5.next = 4;
              return this.createQueryRequest({
                method: 'PATCH',
                path: "/".concat(this.id),
                body: _JSON$stringify({
                  state: state
                }),
                headers: {
                  'Content-Type': 'application/json; charset=utf-8'
                },
                responseType: 'application/json'
              });
            case 4:
              this.jobInfo = _context5.sent;
              this.logger.debug("Successfully aborted job ".concat(this.id));
              return _context5.abrupt("return", this.jobInfo);
            case 9:
              _context5.prev = 9;
              _context5.t0 = _context5["catch"](0);
              this.emit('error', _context5.t0);
              throw _context5.t0;
            case 13:
            case "end":
              return _context5.stop();
          }
        }, _callee4, this, [[0, 9]]);
      }));
      function abort() {
        return _abort.apply(this, arguments);
      }
      return abort;
    }()
    /**
     * Poll for the state of the processing for the job.
     *
     * @param interval Polling interval in milliseconds
     * @param timeout Polling timeout in milliseconds
     * @returns {Promise<Record[]>} A promise that resolves when the job finished being processed.
     */
    )
  }, {
    key: "poll",
    value: (function () {
      var _poll = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {
        var _context6, _context7;
        var interval,
          timeout,
          jobId,
          startTime,
          endTime,
          res,
          timeoutError,
          _args5 = arguments;
        return _regeneratorRuntime.wrap(function _callee5$(_context8) {
          while (1) switch (_context8.prev = _context8.next) {
            case 0:
              interval = _args5.length > 0 && _args5[0] !== undefined ? _args5[0] : this.pollingOptions.pollInterval;
              timeout = _args5.length > 1 && _args5[1] !== undefined ? _args5[1] : this.pollingOptions.pollTimeout;
              jobId = this.id;
              startTime = _Date$now();
              endTime = startTime + timeout;
              this.logger.debug('Start polling for job status');
              this.logger.debug(_concatInstanceProperty(_context6 = "Polling options: timeout:".concat(timeout, "ms | interval: ")).call(_context6, interval, "ms."));
              if (!(timeout === 0)) {
                _context8.next = 9;
                break;
              }
              throw new JobPollingTimeoutError("Skipping polling because of timeout = 0ms. Job Id = ".concat(jobId), jobId);
            case 9:
              if (!(endTime > _Date$now())) {
                _context8.next = 35;
                break;
              }
              _context8.prev = 10;
              _context8.next = 13;
              return this.check();
            case 13:
              res = _context8.sent;
              _context8.t0 = res.state;
              _context8.next = _context8.t0 === 'Aborted' ? 17 : _context8.t0 === 'UploadComplete' ? 18 : _context8.t0 === 'InProgress' ? 18 : _context8.t0 === 'Failed' ? 22 : _context8.t0 === 'JobComplete' ? 24 : 27;
              break;
            case 17:
              throw new Error('Job has been aborted');
            case 18:
              this.emit('inProgress', res);
              _context8.next = 21;
              return delay(interval);
            case 21:
              return _context8.abrupt("break", 27);
            case 22:
              // unlike ingest jobs, the API doesn't return an error msg:
              // https://developer.salesforce.com/docs/atlas.en-us.api_asynch.meta/api_asynch/query_get_one_job.htm
              this.logger.debug(res);
              throw new Error('Query job failed to complete');
            case 24:
              this.logger.debug("Job ".concat(this.id, " was successfully processed."));
              this.emit('jobComplete', res);
              return _context8.abrupt("return");
            case 27:
              _context8.next = 33;
              break;
            case 29:
              _context8.prev = 29;
              _context8.t1 = _context8["catch"](10);
              this.emit('error', _context8.t1);
              throw _context8.t1;
            case 33:
              _context8.next = 9;
              break;
            case 35:
              timeoutError = new JobPollingTimeoutError(_concatInstanceProperty(_context7 = "Polling timed out after ".concat(timeout, "ms. Job Id = ")).call(_context7, jobId), jobId);
              this.emit('error', timeoutError);
              throw timeoutError;
            case 38:
            case "end":
              return _context8.stop();
          }
        }, _callee5, this, [[10, 29]]);
      }));
      function poll() {
        return _poll.apply(this, arguments);
      }
      return poll;
    }()
    /**
     * Check the latest job status
     *
     * @returns {Promise<QueryJobInfoV2>} job information.
     */
    )
  }, {
    key: "check",
    value: (function () {
      var _check = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {
        var jobInfo;
        return _regeneratorRuntime.wrap(function _callee6$(_context9) {
          while (1) switch (_context9.prev = _context9.next) {
            case 0:
              _context9.prev = 0;
              _context9.next = 3;
              return this.createQueryRequest({
                method: 'GET',
                path: "/".concat(this.id),
                responseType: 'application/json'
              });
            case 3:
              jobInfo = _context9.sent;
              this.jobInfo = jobInfo;
              return _context9.abrupt("return", jobInfo);
            case 8:
              _context9.prev = 8;
              _context9.t0 = _context9["catch"](0);
              this.emit('error', _context9.t0);
              throw _context9.t0;
            case 12:
            case "end":
              return _context9.stop();
          }
        }, _callee6, this, [[0, 8]]);
      }));
      function check() {
        return _check.apply(this, arguments);
      }
      return check;
    }()
    /**
     * Get the results for a query job as a record stream
     *
     * This method assumes the job finished being processed
     * @returns {RecordStream} - Record stream, convertible to a CSV data stream
     */
    )
  }, {
    key: "result",
    value: (function () {
      var _result = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {
        var resultStream, resultDataStream, resultsPath, _context10, resPromise;
        return _regeneratorRuntime.wrap(function _callee7$(_context11) {
          while (1) switch (_context11.prev = _context11.next) {
            case 0:
              resultStream = new Parsable();
              resultDataStream = resultStream.stream('csv');
              resultsPath = "/".concat(this.id, "/results");
            case 3:
              if (!(this.locator !== 'null')) {
                _context11.next = 10;
                break;
              }
              resPromise = this.createQueryRequest({
                method: 'GET',
                path: this.locator
                // resultsPath starts with '/'
                ? _concatInstanceProperty(_context10 = "".concat(resultsPath, "?locator=")).call(_context10, this.locator) : resultsPath,
                headers: {
                  Accept: 'text/csv'
                }
              });
              resPromise.stream().pipe(resultDataStream);
              _context11.next = 8;
              return resPromise;
            case 8:
              _context11.next = 3;
              break;
            case 10:
              return _context11.abrupt("return", resultStream);
            case 11:
            case "end":
              return _context11.stop();
          }
        }, _callee7, this);
      }));
      function result() {
        return _result.apply(this, arguments);
      }
      return result;
    }()
    /**
     * Deletes a query job.
     */
    )
  }, {
    key: "delete",
    value: (function () {
      var _delete2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {
        return _regeneratorRuntime.wrap(function _callee8$(_context12) {
          while (1) switch (_context12.prev = _context12.next) {
            case 0:
              return _context12.abrupt("return", this.createQueryRequest({
                method: 'DELETE',
                path: "/".concat(this.id)
              }));
            case 1:
            case "end":
              return _context12.stop();
          }
        }, _callee8, this);
      }));
      function _delete() {
        return _delete2.apply(this, arguments);
      }
      return _delete;
    }())
  }, {
    key: "createQueryRequest",
    value: function createQueryRequest(request) {
      var _this3 = this;
      var path = request.path,
        responseType = request.responseType;
      var basePath = "services/data/v".concat(this.connection.version, "/jobs/query");
      var url = new _URL(path ? basePath + path : basePath, this.connection.instanceUrl).toString();
      var httpApi = new BulkApiV2(this.connection, {
        responseType: responseType
      });
      httpApi.on('response', function (response) {
        _this3.locator = response.headers['sforce-locator'];
        _this3.logger.debug("sforce-locator: ".concat(_this3.locator));
      });
      return httpApi.request(_objectSpread(_objectSpread({}, request), {}, {
        url: url
      }));
    }
  }]);
}(EventEmitter);

/**
 * Class for Bulk API V2 Ingest Job
 */
export var IngestJobV2 = /*#__PURE__*/function (_EventEmitter2) {
  /**
   *
   */
  function IngestJobV2(conn, options) {
    var _this4;
    _classCallCheck(this, IngestJobV2);
    _this4 = _callSuper(this, IngestJobV2);
    _this4.connection = conn;
    _this4.logger = _this4.connection._logLevel ? getLogger('bulk2:IngestJobV2').createInstance(_this4.connection._logLevel) : getLogger('bulk2:IngestJobV2');
    _this4.pollingOptions = options.pollingOptions;
    if ('id' in options) {
      _this4._id = options.id;
    } else {
      _this4.bodyParams = options.bodyParams;
    }
    _this4.jobData = new JobDataV2({
      createRequest: function createRequest(request) {
        return _this4.createIngestRequest(request);
      },
      job: _this4
    });
    // default error handler to keep the latest error
    _this4.on('error', function (error) {
      return _this4.error = error;
    });
    return _this4;
  }

  /**
   * Get the query job ID.
   *
   * @returns {string} query job Id.
   */
  _inherits(IngestJobV2, _EventEmitter2);
  return _createClass(IngestJobV2, [{
    key: "id",
    get: function get() {
      return this.jobInfo ? this.jobInfo.id : this._id;
    }

    /**
     * Get the query job info.
     *
     * @returns {Promise<QueryJobInfoV2>} ingest job information.
     */
  }, {
    key: "getInfo",
    value: function getInfo() {
      if (this.jobInfo) {
        return this.jobInfo;
      }
      throw new Error('No internal job info. Make sure to call `await job.check`.');
    }

    /**
     * Create a job representing a bulk operation in the org
     *
     * @returns {Promise<QueryJobInfoV2>} job information.
     */
  }, {
    key: "open",
    value: (function () {
      var _open2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9() {
        return _regeneratorRuntime.wrap(function _callee9$(_context13) {
          while (1) switch (_context13.prev = _context13.next) {
            case 0:
              if (this.bodyParams) {
                _context13.next = 2;
                break;
              }
              throw new Error('Missing required body params to open a new ingest job.');
            case 2:
              _context13.prev = 2;
              _context13.next = 5;
              return this.createIngestRequest({
                method: 'POST',
                body: _JSON$stringify(this.bodyParams),
                headers: {
                  'Content-Type': 'application/json; charset=utf-8'
                },
                responseType: 'application/json'
              });
            case 5:
              this.jobInfo = _context13.sent;
              this.logger.debug("Successfully created job ".concat(this.id));
              this.emit('open');
              _context13.next = 14;
              break;
            case 10:
              _context13.prev = 10;
              _context13.t0 = _context13["catch"](2);
              this.emit('error', _context13.t0);
              throw _context13.t0;
            case 14:
              return _context13.abrupt("return", this.jobInfo);
            case 15:
            case "end":
              return _context13.stop();
          }
        }, _callee9, this, [[2, 10]]);
      }));
      function open() {
        return _open2.apply(this, arguments);
      }
      return open;
    }()
    /** Upload data for a job in CSV format
     *
     *  @param input CSV as a string, or array of records or readable stream
     */
    )
  }, {
    key: "uploadData",
    value: (function () {
      var _uploadData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(input) {
        return _regeneratorRuntime.wrap(function _callee10$(_context14) {
          while (1) switch (_context14.prev = _context14.next) {
            case 0:
              _context14.next = 2;
              return this.jobData.execute(input).result;
            case 2:
              this.logger.debug("Successfully uploaded data to job ".concat(this.id));
            case 3:
            case "end":
              return _context14.stop();
          }
        }, _callee10, this);
      }));
      function uploadData(_x4) {
        return _uploadData.apply(this, arguments);
      }
      return uploadData;
    }()
    /**
     * Close opened job
     *
     * This method will notify the org  that the upload of job data is complete and is ready for processing.
     */
    )
  }, {
    key: "close",
    value: (function () {
      var _close = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11() {
        var state;
        return _regeneratorRuntime.wrap(function _callee11$(_context15) {
          while (1) switch (_context15.prev = _context15.next) {
            case 0:
              _context15.prev = 0;
              state = 'UploadComplete';
              _context15.next = 4;
              return this.createIngestRequest({
                method: 'PATCH',
                path: "/".concat(this.id),
                body: _JSON$stringify({
                  state: state
                }),
                headers: {
                  'Content-Type': 'application/json; charset=utf-8'
                },
                responseType: 'application/json'
              });
            case 4:
              this.jobInfo = _context15.sent;
              this.logger.debug("Successfully closed job ".concat(this.id));
              this.emit('close');
              _context15.next = 13;
              break;
            case 9:
              _context15.prev = 9;
              _context15.t0 = _context15["catch"](0);
              this.emit('error', _context15.t0);
              throw _context15.t0;
            case 13:
            case "end":
              return _context15.stop();
          }
        }, _callee11, this, [[0, 9]]);
      }));
      function close() {
        return _close.apply(this, arguments);
      }
      return close;
    }()
    /**
     * Set the status to abort
     */
    )
  }, {
    key: "abort",
    value: (function () {
      var _abort2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12() {
        var state;
        return _regeneratorRuntime.wrap(function _callee12$(_context16) {
          while (1) switch (_context16.prev = _context16.next) {
            case 0:
              _context16.prev = 0;
              state = 'Aborted';
              _context16.next = 4;
              return this.createIngestRequest({
                method: 'PATCH',
                path: "/".concat(this.id),
                body: _JSON$stringify({
                  state: state
                }),
                headers: {
                  'Content-Type': 'application/json; charset=utf-8'
                },
                responseType: 'application/json'
              });
            case 4:
              this.jobInfo = _context16.sent;
              this.logger.debug("Successfully aborted job ".concat(this.id));
              this.emit('aborted');
              _context16.next = 13;
              break;
            case 9:
              _context16.prev = 9;
              _context16.t0 = _context16["catch"](0);
              this.emit('error', _context16.t0);
              throw _context16.t0;
            case 13:
            case "end":
              return _context16.stop();
          }
        }, _callee12, this, [[0, 9]]);
      }));
      function abort() {
        return _abort2.apply(this, arguments);
      }
      return abort;
    }()
    /**
     * Poll for the state of the processing for the job.
     *
     * This method will only throw after a timeout. To capture a
     * job failure while polling you must set a listener for the
     * `failed` event before calling it:
     *
     * job.on('failed', (err) => console.error(err))
     * await job.poll()
     *
     * @param interval Polling interval in milliseconds
     * @param timeout Polling timeout in milliseconds
     * @returns {Promise<void>} A promise that resolves when the job finishes successfully
     */
    )
  }, {
    key: "poll",
    value: (function () {
      var _poll2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee13() {
        var _context17, _context18;
        var interval,
          timeout,
          jobId,
          startTime,
          endTime,
          res,
          timeoutError,
          _args13 = arguments;
        return _regeneratorRuntime.wrap(function _callee13$(_context19) {
          while (1) switch (_context19.prev = _context19.next) {
            case 0:
              interval = _args13.length > 0 && _args13[0] !== undefined ? _args13[0] : this.pollingOptions.pollInterval;
              timeout = _args13.length > 1 && _args13[1] !== undefined ? _args13[1] : this.pollingOptions.pollTimeout;
              jobId = this.id;
              startTime = _Date$now();
              endTime = startTime + timeout;
              if (!(timeout === 0)) {
                _context19.next = 7;
                break;
              }
              throw new JobPollingTimeoutError("Skipping polling because of timeout = 0ms. Job Id = ".concat(jobId), jobId);
            case 7:
              this.logger.debug('Start polling for job status');
              this.logger.debug(_concatInstanceProperty(_context17 = "Polling options: timeout:".concat(timeout, "ms | interval: ")).call(_context17, interval, "ms."));
            case 9:
              if (!(endTime > _Date$now())) {
                _context19.next = 36;
                break;
              }
              _context19.prev = 10;
              _context19.next = 13;
              return this.check();
            case 13:
              res = _context19.sent;
              _context19.t0 = res.state;
              _context19.next = _context19.t0 === 'Open' ? 17 : _context19.t0 === 'Aborted' ? 18 : _context19.t0 === 'UploadComplete' ? 19 : _context19.t0 === 'InProgress' ? 19 : _context19.t0 === 'Failed' ? 23 : _context19.t0 === 'JobComplete' ? 25 : 28;
              break;
            case 17:
              throw new Error('Job is still open. Make sure close the job by `close` method on the job instance before polling.');
            case 18:
              throw new Error('Job has been aborted');
            case 19:
              this.emit('inProgress', res);
              _context19.next = 22;
              return delay(interval);
            case 22:
              return _context19.abrupt("break", 28);
            case 23:
              this.logger.debug(res);
              throw new Error("Ingest job failed to complete due to: ".concat(res.errorMessage));
            case 25:
              this.logger.debug("Job ".concat(this.id, " was successfully processed."));
              this.emit('jobComplete', res);
              return _context19.abrupt("return");
            case 28:
              _context19.next = 34;
              break;
            case 30:
              _context19.prev = 30;
              _context19.t1 = _context19["catch"](10);
              this.emit('error', _context19.t1);
              throw _context19.t1;
            case 34:
              _context19.next = 9;
              break;
            case 36:
              timeoutError = new JobPollingTimeoutError(_concatInstanceProperty(_context18 = "Polling timed out after ".concat(timeout, "ms. Job Id = ")).call(_context18, jobId), jobId);
              this.emit('error', timeoutError);
              throw timeoutError;
            case 39:
            case "end":
              return _context19.stop();
          }
        }, _callee13, this, [[10, 30]]);
      }));
      function poll() {
        return _poll2.apply(this, arguments);
      }
      return poll;
    }()
    /**
     * Check the latest batch status in server
     */
    )
  }, {
    key: "check",
    value: (function () {
      var _check2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee14() {
        var jobInfo;
        return _regeneratorRuntime.wrap(function _callee14$(_context20) {
          while (1) switch (_context20.prev = _context20.next) {
            case 0:
              _context20.prev = 0;
              _context20.next = 3;
              return this.createIngestRequest({
                method: 'GET',
                path: "/".concat(this.id),
                responseType: 'application/json'
              });
            case 3:
              jobInfo = _context20.sent;
              this.jobInfo = jobInfo;
              return _context20.abrupt("return", jobInfo);
            case 8:
              _context20.prev = 8;
              _context20.t0 = _context20["catch"](0);
              this.emit('error', _context20.t0);
              throw _context20.t0;
            case 12:
            case "end":
              return _context20.stop();
          }
        }, _callee14, this, [[0, 8]]);
      }));
      function check() {
        return _check2.apply(this, arguments);
      }
      return check;
    }()
    /** Return all record results
     *
     * This method will return successful, failed and unprocessed records
     *
     * @returns Promise<IngestJobV2Results>
     */
    )
  }, {
    key: "getAllResults",
    value: (function () {
      var _getAllResults = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee15() {
        var _yield$Promise$all, _yield$Promise$all2, successfulResults, failedResults, unprocessedRecords;
        return _regeneratorRuntime.wrap(function _callee15$(_context21) {
          while (1) switch (_context21.prev = _context21.next) {
            case 0:
              _context21.next = 2;
              return _Promise.all([this.getSuccessfulResults(), this.getFailedResults(), this.getUnprocessedRecords()]);
            case 2:
              _yield$Promise$all = _context21.sent;
              _yield$Promise$all2 = _slicedToArray(_yield$Promise$all, 3);
              successfulResults = _yield$Promise$all2[0];
              failedResults = _yield$Promise$all2[1];
              unprocessedRecords = _yield$Promise$all2[2];
              return _context21.abrupt("return", {
                successfulResults: successfulResults,
                failedResults: failedResults,
                unprocessedRecords: unprocessedRecords
              });
            case 8:
            case "end":
              return _context21.stop();
          }
        }, _callee15, this);
      }));
      function getAllResults() {
        return _getAllResults.apply(this, arguments);
      }
      return getAllResults;
    }()
    /** Return successful results
     *
     * The order of records returned is not guaranteed to match the ordering of the uploaded data.
     *
     * @returns Promise<IngestJobV2SuccessfulResults>
     */
    )
  }, {
    key: "getSuccessfulResults",
    value: (function () {
      var _getSuccessfulResults = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee16() {
        var results;
        return _regeneratorRuntime.wrap(function _callee16$(_context22) {
          while (1) switch (_context22.prev = _context22.next) {
            case 0:
              if (!this.bulkJobSuccessfulResults) {
                _context22.next = 2;
                break;
              }
              return _context22.abrupt("return", this.bulkJobSuccessfulResults);
            case 2:
              _context22.next = 4;
              return this.createIngestRequest({
                method: 'GET',
                path: "/".concat(this.id, "/successfulResults"),
                responseType: 'text/csv'
              });
            case 4:
              results = _context22.sent;
              this.bulkJobSuccessfulResults = results !== null && results !== void 0 ? results : [];
              return _context22.abrupt("return", this.bulkJobSuccessfulResults);
            case 7:
            case "end":
              return _context22.stop();
          }
        }, _callee16, this);
      }));
      function getSuccessfulResults() {
        return _getSuccessfulResults.apply(this, arguments);
      }
      return getSuccessfulResults;
    }()
    /** Return failed results
     *
     * The order of records in the response is not guaranteed to match the ordering of records in the original job data.
     *
     * @returns Promise<IngestJobV2SuccessfulResults>
     */
    )
  }, {
    key: "getFailedResults",
    value: (function () {
      var _getFailedResults = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee17() {
        var results;
        return _regeneratorRuntime.wrap(function _callee17$(_context23) {
          while (1) switch (_context23.prev = _context23.next) {
            case 0:
              if (!this.bulkJobFailedResults) {
                _context23.next = 2;
                break;
              }
              return _context23.abrupt("return", this.bulkJobFailedResults);
            case 2:
              _context23.next = 4;
              return this.createIngestRequest({
                method: 'GET',
                path: "/".concat(this.id, "/failedResults"),
                responseType: 'text/csv'
              });
            case 4:
              results = _context23.sent;
              this.bulkJobFailedResults = results !== null && results !== void 0 ? results : [];
              return _context23.abrupt("return", this.bulkJobFailedResults);
            case 7:
            case "end":
              return _context23.stop();
          }
        }, _callee17, this);
      }));
      function getFailedResults() {
        return _getFailedResults.apply(this, arguments);
      }
      return getFailedResults;
    }()
    /** Return unprocessed results
     *
     * The unprocessed records endpoint returns records as a CSV.
     * If the request helper is able to parse it, you get the records
     * as an array of objects.
     * If unable to parse the it (bad CSV), you get the raw response as a string.
     *
     * The order of records in the response is not guaranteed to match the ordering of records in the original job data.
     *
     * @returns Promise<IngestJobV2UnprocessedRecords>
     */
    )
  }, {
    key: "getUnprocessedRecords",
    value: (function () {
      var _getUnprocessedRecords = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee18() {
        var results;
        return _regeneratorRuntime.wrap(function _callee18$(_context24) {
          while (1) switch (_context24.prev = _context24.next) {
            case 0:
              if (!this.bulkJobUnprocessedRecords) {
                _context24.next = 2;
                break;
              }
              return _context24.abrupt("return", this.bulkJobUnprocessedRecords);
            case 2:
              _context24.next = 4;
              return this.createIngestRequest({
                method: 'GET',
                path: "/".concat(this.id, "/unprocessedrecords"),
                responseType: 'text/csv'
              });
            case 4:
              results = _context24.sent;
              this.bulkJobUnprocessedRecords = results !== null && results !== void 0 ? results : [];
              return _context24.abrupt("return", this.bulkJobUnprocessedRecords);
            case 7:
            case "end":
              return _context24.stop();
          }
        }, _callee18, this);
      }));
      function getUnprocessedRecords() {
        return _getUnprocessedRecords.apply(this, arguments);
      }
      return getUnprocessedRecords;
    }()
    /**
     * Deletes an ingest job.
     */
    )
  }, {
    key: "delete",
    value: (function () {
      var _delete3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee19() {
        return _regeneratorRuntime.wrap(function _callee19$(_context25) {
          while (1) switch (_context25.prev = _context25.next) {
            case 0:
              return _context25.abrupt("return", this.createIngestRequest({
                method: 'DELETE',
                path: "/".concat(this.id)
              }));
            case 1:
            case "end":
              return _context25.stop();
          }
        }, _callee19, this);
      }));
      function _delete() {
        return _delete3.apply(this, arguments);
      }
      return _delete;
    }())
  }, {
    key: "createIngestRequest",
    value: function createIngestRequest(request) {
      var path = request.path,
        responseType = request.responseType;
      var basePath = "/services/data/v".concat(this.connection.version, "/jobs/ingest");
      var url = new _URL(path ? basePath + path : basePath, this.connection.instanceUrl).toString();
      return new BulkApiV2(this.connection, {
        responseType: responseType
      }).request(_objectSpread(_objectSpread({}, request), {}, {
        url: url
      }));
    }
  }]);
}(EventEmitter);
var JobDataV2 = /*#__PURE__*/function (_Writable) {
  /**
   *
   */
  function JobDataV2(options) {
    var _this5;
    _classCallCheck(this, JobDataV2);
    _this5 = _callSuper(this, JobDataV2, [{
      objectMode: true
    }]);
    var createRequest = options.createRequest;
    _this5.job = options.job;
    _this5.uploadStream = new Serializable();
    _this5.downloadStream = new Parsable();
    var converterOptions = {
      nullValue: '#N/A'
    };
    var uploadDataStream = _this5.uploadStream.stream('csv', converterOptions);
    var downloadDataStream = _this5.downloadStream.stream('csv', converterOptions);
    _this5.dataStream = concatStreamsAsDuplex(uploadDataStream, downloadDataStream);
    _this5.on('finish', function () {
      return _this5.uploadStream.end();
    });
    uploadDataStream.once('readable', function () {
      try {
        // pipe upload data to batch API request stream
        var req = createRequest({
          method: 'PUT',
          path: "/".concat(_this5.job.id, "/batches"),
          headers: {
            'Content-Type': 'text/csv'
          },
          responseType: 'application/json'
        });
        _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee20() {
          var res;
          return _regeneratorRuntime.wrap(function _callee20$(_context26) {
            while (1) switch (_context26.prev = _context26.next) {
              case 0:
                _context26.prev = 0;
                _context26.next = 3;
                return req;
              case 3:
                res = _context26.sent;
                _this5.emit('response', res);
                _context26.next = 10;
                break;
              case 7:
                _context26.prev = 7;
                _context26.t0 = _context26["catch"](0);
                _this5.emit('error', _context26.t0);
              case 10:
              case "end":
                return _context26.stop();
            }
          }, _callee20, null, [[0, 7]]);
        }))();
        uploadDataStream.pipe(req.stream());
      } catch (err) {
        _this5.emit('error', err);
      }
    });
    return _this5;
  }
  _inherits(JobDataV2, _Writable);
  return _createClass(JobDataV2, [{
    key: "_write",
    value: function _write(record_, enc, cb) {
      var Id = record_.Id,
        type = record_.type,
        attributes = record_.attributes,
        rrec = _objectWithoutProperties(record_, _excluded2);
      var record;
      switch (this.job.getInfo().operation) {
        case 'insert':
          record = rrec;
          break;
        case 'delete':
        case 'hardDelete':
          record = {
            Id: Id
          };
          break;
        default:
          record = _objectSpread({
            Id: Id
          }, rrec);
      }
      this.uploadStream.write(record, enc, cb);
    }

    /**
     * Returns duplex stream which accepts CSV data input and batch result output
     */
  }, {
    key: "stream",
    value: function stream() {
      return this.dataStream;
    }

    /**
     * Execute batch operation
     */
  }, {
    key: "execute",
    value: function execute(input) {
      var _this6 = this;
      if (this.result) {
        throw new Error('Data can only be uploaded to a job once.');
      }
      this.result = new _Promise(function (resolve, reject) {
        _this6.once('response', function () {
          return resolve();
        });
        _this6.once('error', reject);
      });
      if (is.nodeStream(input)) {
        // if input has stream.Readable interface
        input.pipe(this.dataStream);
      } else {
        var recordData = structuredClone(input);
        if (_Array$isArray(recordData)) {
          var _iterator = _createForOfIteratorHelper(recordData),
            _step;
          try {
            for (_iterator.s(); !(_step = _iterator.n()).done;) {
              var record = _step.value;
              for (var _i = 0, _Object$keys = _Object$keys2(record); _i < _Object$keys.length; _i++) {
                var key = _Object$keys[_i];
                if (typeof record[key] === 'boolean') {
                  record[key] = String(record[key]);
                }
              }
              this.write(record);
            }
          } catch (err) {
            _iterator.e(err);
          } finally {
            _iterator.f();
          }
          this.end();
        } else if (typeof recordData === 'string') {
          this.dataStream.write(recordData, 'utf8');
          this.dataStream.end();
        }
      }
      return this;
    }
  }]);
}(Writable);
function delay(ms) {
  return new _Promise(function (resolve) {
    return _setTimeout(resolve, ms);
  });
}

/*--------------------------------------------*/
/*
 * Register hook in connection instantiation for dynamically adding this API module features
 */
registerModule('bulk2', function (conn) {
  return new BulkV2(conn);
});
export default BulkV2;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFdmVudEVtaXR0ZXIiLCJXcml0YWJsZSIsIlNlcmlhbGl6YWJsZSIsIlBhcnNhYmxlIiwiSHR0cEFwaSIsInJlZ2lzdGVyTW9kdWxlIiwiZ2V0TG9nZ2VyIiwiY29uY2F0U3RyZWFtc0FzRHVwbGV4IiwiaXMiLCJKb2JQb2xsaW5nVGltZW91dEVycm9yIiwiX0Vycm9yIiwibWVzc2FnZSIsImpvYklkIiwiX3RoaXMiLCJfY2xhc3NDYWxsQ2hlY2siLCJfY2FsbFN1cGVyIiwibmFtZSIsIl9pbmhlcml0cyIsIl9jcmVhdGVDbGFzcyIsIl93cmFwTmF0aXZlU3VwZXIiLCJFcnJvciIsIkJ1bGtBcGlWMiIsIl9IdHRwQXBpIiwiYXJndW1lbnRzIiwia2V5IiwidmFsdWUiLCJoYXNFcnJvckluUmVzcG9uc2VCb2R5IiwiYm9keSIsIl9BcnJheSRpc0FycmF5IiwiX3R5cGVvZiIsImlzU2Vzc2lvbkV4cGlyZWQiLCJyZXNwb25zZSIsIl9jb250ZXh0Iiwic3RhdHVzQ29kZSIsIl9pbmNsdWRlc0luc3RhbmNlUHJvcGVydHkiLCJjYWxsIiwicGFyc2VFcnJvciIsImVycm9yQ29kZSIsIkJ1bGtWMiIsImNvbm5lY3Rpb24iLCJfZGVmaW5lUHJvcGVydHkiLCJsb2dnZXIiLCJfbG9nTGV2ZWwiLCJjcmVhdGVJbnN0YW5jZSIsImNyZWF0ZUpvYiIsIm9wdGlvbnMiLCJJbmdlc3RKb2JWMiIsImJvZHlQYXJhbXMiLCJwb2xsaW5nT3B0aW9ucyIsImpvYiIsInR5cGUiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJpZCIsIlF1ZXJ5Sm9iVjIiLCJfbG9hZEFuZFdhaXRGb3JSZXN1bHRzIiwiX2FzeW5jVG9HZW5lcmF0b3IiLCJfcmVnZW5lcmF0b3JSdW50aW1lIiwibWFyayIsIl9jYWxsZWUiLCJwb2xsSW50ZXJ2YWwiLCJwb2xsVGltZW91dCIsImlucHV0IiwiY3JlYXRlSm9iT3B0cyIsImVyciIsIndyYXAiLCJfY2FsbGVlJCIsIl9jb250ZXh0MiIsInByZXYiLCJuZXh0IiwiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIiwiX2V4Y2x1ZGVkIiwib3BlbiIsInVwbG9hZERhdGEiLCJjbG9zZSIsInBvbGwiLCJnZXRBbGxSZXN1bHRzIiwiYWJydXB0Iiwic2VudCIsInQwIiwiZXJyb3IiLCJjb25jYXQiLCJkZWxldGUiLCJjYXRjaCIsImlnbm9yZWQiLCJzdG9wIiwibG9hZEFuZFdhaXRGb3JSZXN1bHRzIiwiX3giLCJhcHBseSIsIl9xdWVyeSIsIl9jYWxsZWUyIiwic29xbCIsInF1ZXJ5Sm9iIiwicmVjb3JkU3RyZWFtIiwiZGF0YVN0cmVhbSIsInF1ZXJ5UmVjb3Jkc1N0cmVhbSIsIl9jYWxsZWUyJCIsIl9jb250ZXh0MyIsInF1ZXJ5Iiwib3BlcmF0aW9uIiwic2NhbkFsbCIsImNvbHVtbkRlbGltaXRlciIsImxpbmVFbmRpbmciLCJzdHJlYW0iLCJyZXN1bHQiLCJ0aGVuIiwicyIsInBpcGUiLCJfeDIiLCJfeDMiLCJfRXZlbnRFbWl0dGVyIiwiY29ubiIsIl90aGlzMiIsIl9pZCIsIm9uIiwiZ2V0Iiwiam9iSW5mbyIsImdldEluZm8iLCJfb3BlbiIsIl9jYWxsZWUzIiwiX2NhbGxlZTMkIiwiX2NvbnRleHQ0IiwiY3JlYXRlUXVlcnlSZXF1ZXN0IiwibWV0aG9kIiwiX0pTT04kc3RyaW5naWZ5IiwiaGVhZGVycyIsInJlc3BvbnNlVHlwZSIsImRlYnVnIiwiZW1pdCIsIl9hYm9ydCIsIl9jYWxsZWU0Iiwic3RhdGUiLCJfY2FsbGVlNCQiLCJfY29udGV4dDUiLCJwYXRoIiwiYWJvcnQiLCJfcG9sbCIsIl9jYWxsZWU1IiwiX2NvbnRleHQ2IiwiX2NvbnRleHQ3IiwiaW50ZXJ2YWwiLCJ0aW1lb3V0Iiwic3RhcnRUaW1lIiwiZW5kVGltZSIsInJlcyIsInRpbWVvdXRFcnJvciIsIl9hcmdzNSIsIl9jYWxsZWU1JCIsIl9jb250ZXh0OCIsIl9EYXRlJG5vdyIsIl9jb25jYXRJbnN0YW5jZVByb3BlcnR5IiwiY2hlY2siLCJkZWxheSIsInQxIiwiX2NoZWNrIiwiX2NhbGxlZTYiLCJfY2FsbGVlNiQiLCJfY29udGV4dDkiLCJfcmVzdWx0IiwiX2NhbGxlZTciLCJyZXN1bHRTdHJlYW0iLCJyZXN1bHREYXRhU3RyZWFtIiwicmVzdWx0c1BhdGgiLCJfY29udGV4dDEwIiwicmVzUHJvbWlzZSIsIl9jYWxsZWU3JCIsIl9jb250ZXh0MTEiLCJsb2NhdG9yIiwiQWNjZXB0IiwiX2RlbGV0ZTIiLCJfY2FsbGVlOCIsIl9jYWxsZWU4JCIsIl9jb250ZXh0MTIiLCJfZGVsZXRlIiwicmVxdWVzdCIsIl90aGlzMyIsImJhc2VQYXRoIiwidmVyc2lvbiIsInVybCIsIl9VUkwiLCJpbnN0YW5jZVVybCIsInRvU3RyaW5nIiwiaHR0cEFwaSIsIl9vYmplY3RTcHJlYWQiLCJfRXZlbnRFbWl0dGVyMiIsIl90aGlzNCIsImpvYkRhdGEiLCJKb2JEYXRhVjIiLCJjcmVhdGVSZXF1ZXN0IiwiY3JlYXRlSW5nZXN0UmVxdWVzdCIsIl9vcGVuMiIsIl9jYWxsZWU5IiwiX2NhbGxlZTkkIiwiX2NvbnRleHQxMyIsIl91cGxvYWREYXRhIiwiX2NhbGxlZTEwIiwiX2NhbGxlZTEwJCIsIl9jb250ZXh0MTQiLCJleGVjdXRlIiwiX3g0IiwiX2Nsb3NlIiwiX2NhbGxlZTExIiwiX2NhbGxlZTExJCIsIl9jb250ZXh0MTUiLCJfYWJvcnQyIiwiX2NhbGxlZTEyIiwiX2NhbGxlZTEyJCIsIl9jb250ZXh0MTYiLCJfcG9sbDIiLCJfY2FsbGVlMTMiLCJfY29udGV4dDE3IiwiX2NvbnRleHQxOCIsIl9hcmdzMTMiLCJfY2FsbGVlMTMkIiwiX2NvbnRleHQxOSIsImVycm9yTWVzc2FnZSIsIl9jaGVjazIiLCJfY2FsbGVlMTQiLCJfY2FsbGVlMTQkIiwiX2NvbnRleHQyMCIsIl9nZXRBbGxSZXN1bHRzIiwiX2NhbGxlZTE1IiwiX3lpZWxkJFByb21pc2UkYWxsIiwiX3lpZWxkJFByb21pc2UkYWxsMiIsInN1Y2Nlc3NmdWxSZXN1bHRzIiwiZmFpbGVkUmVzdWx0cyIsInVucHJvY2Vzc2VkUmVjb3JkcyIsIl9jYWxsZWUxNSQiLCJfY29udGV4dDIxIiwiX1Byb21pc2UiLCJhbGwiLCJnZXRTdWNjZXNzZnVsUmVzdWx0cyIsImdldEZhaWxlZFJlc3VsdHMiLCJnZXRVbnByb2Nlc3NlZFJlY29yZHMiLCJfc2xpY2VkVG9BcnJheSIsIl9nZXRTdWNjZXNzZnVsUmVzdWx0cyIsIl9jYWxsZWUxNiIsInJlc3VsdHMiLCJfY2FsbGVlMTYkIiwiX2NvbnRleHQyMiIsImJ1bGtKb2JTdWNjZXNzZnVsUmVzdWx0cyIsIl9nZXRGYWlsZWRSZXN1bHRzIiwiX2NhbGxlZTE3IiwiX2NhbGxlZTE3JCIsIl9jb250ZXh0MjMiLCJidWxrSm9iRmFpbGVkUmVzdWx0cyIsIl9nZXRVbnByb2Nlc3NlZFJlY29yZHMiLCJfY2FsbGVlMTgiLCJfY2FsbGVlMTgkIiwiX2NvbnRleHQyNCIsImJ1bGtKb2JVbnByb2Nlc3NlZFJlY29yZHMiLCJfZGVsZXRlMyIsIl9jYWxsZWUxOSIsIl9jYWxsZWUxOSQiLCJfY29udGV4dDI1IiwiX1dyaXRhYmxlIiwiX3RoaXM1Iiwib2JqZWN0TW9kZSIsInVwbG9hZFN0cmVhbSIsImRvd25sb2FkU3RyZWFtIiwiY29udmVydGVyT3B0aW9ucyIsIm51bGxWYWx1ZSIsInVwbG9hZERhdGFTdHJlYW0iLCJkb3dubG9hZERhdGFTdHJlYW0iLCJlbmQiLCJvbmNlIiwicmVxIiwiX2NhbGxlZTIwIiwiX2NhbGxlZTIwJCIsIl9jb250ZXh0MjYiLCJfd3JpdGUiLCJyZWNvcmRfIiwiZW5jIiwiY2IiLCJJZCIsImF0dHJpYnV0ZXMiLCJycmVjIiwiX2V4Y2x1ZGVkMiIsInJlY29yZCIsIndyaXRlIiwiX3RoaXM2IiwicmVzb2x2ZSIsInJlamVjdCIsIm5vZGVTdHJlYW0iLCJyZWNvcmREYXRhIiwic3RydWN0dXJlZENsb25lIiwiX2l0ZXJhdG9yIiwiX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiLCJfc3RlcCIsIm4iLCJkb25lIiwiX2kiLCJfT2JqZWN0JGtleXMiLCJfT2JqZWN0JGtleXMyIiwiU3RyaW5nIiwiZSIsImYiLCJtcyIsIl9zZXRUaW1lb3V0Il0sInNvdXJjZXMiOlsiLi4vLi4vc3JjL2FwaS9idWxrMi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdldmVudHMnO1xuaW1wb3J0IHsgRHVwbGV4LCBSZWFkYWJsZSwgV3JpdGFibGUgfSBmcm9tICdzdHJlYW0nO1xuaW1wb3J0IENvbm5lY3Rpb24gZnJvbSAnLi4vY29ubmVjdGlvbic7XG5pbXBvcnQgeyBTZXJpYWxpemFibGUsIFBhcnNhYmxlIH0gZnJvbSAnLi4vcmVjb3JkLXN0cmVhbSc7XG5pbXBvcnQgSHR0cEFwaSBmcm9tICcuLi9odHRwLWFwaSc7XG5pbXBvcnQgeyBTdHJlYW1Qcm9taXNlIH0gZnJvbSAnLi4vdXRpbC9wcm9taXNlJztcbmltcG9ydCB7IHJlZ2lzdGVyTW9kdWxlIH0gZnJvbSAnLi4vanNmb3JjZSc7XG5pbXBvcnQgeyBCdWxrUmVxdWVzdCB9IGZyb20gJy4vYnVsayc7XG5pbXBvcnQgeyBnZXRMb2dnZXIsIExvZ2dlciB9IGZyb20gJy4uL3V0aWwvbG9nZ2VyJztcbmltcG9ydCB7IGNvbmNhdFN0cmVhbXNBc0R1cGxleCB9IGZyb20gJy4uL3V0aWwvc3RyZWFtJztcbmltcG9ydCB7IEh0dHBSZXNwb25zZSwgUmVjb3JkLCBTY2hlbWEgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgaXMgZnJvbSAnQHNpbmRyZXNvcmh1cy9pcyc7XG5cbmV4cG9ydCB0eXBlIEluZ2VzdE9wZXJhdGlvbiA9XG4gIHwgJ2luc2VydCdcbiAgfCAndXBkYXRlJ1xuICB8ICd1cHNlcnQnXG4gIHwgJ2RlbGV0ZSdcbiAgfCAnaGFyZERlbGV0ZSc7XG5cbnR5cGUgQmFzZUpvYkluZm8gPSB7XG4gIGlkOiBzdHJpbmc7XG4gIG9iamVjdDogc3RyaW5nO1xuICBjcmVhdGVkQnlJZDogc3RyaW5nO1xuICBjcmVhdGVkRGF0ZTogc3RyaW5nO1xuICBzeXN0ZW1Nb2RzdGFtcDogc3RyaW5nO1xuICBhcGlWZXJzaW9uOiBudW1iZXI7XG4gIGxpbmVFbmRpbmc6ICdMRicgfCAnQ1JMRic7XG4gIGNvbHVtbkRlbGltaXRlcjpcbiAgICB8ICdCQUNLUVVPVEUnXG4gICAgfCAnQ0FSRVQnXG4gICAgfCAnQ09NTUEnXG4gICAgfCAnUElQRSdcbiAgICB8ICdTRU1JQ09MT04nXG4gICAgfCAnVEFCJztcbiAgY29uY3VycmVuY3lNb2RlOiAnUGFyYWxsZWwnO1xuICBjb250ZW50VHlwZTogJ0NTVic7XG4gIG51bWJlclJlY29yZHNQcm9jZXNzZWQ6IG51bWJlcjtcbiAgcmV0cmllczogbnVtYmVyO1xuICB0b3RhbFByb2Nlc3NpbmdUaW1lOiBudW1iZXI7XG59O1xuXG5leHBvcnQgdHlwZSBRdWVyeUpvYkluZm9WMiA9IEJhc2VKb2JJbmZvICYge1xuICBvcGVyYXRpb246ICdxdWVyeScgfCAncXVlcnlBbGwnO1xuICBzdGF0ZTogJ1VwbG9hZENvbXBsZXRlJyB8ICdJblByb2dyZXNzJyB8ICdBYm9ydGVkJyB8ICdKb2JDb21wbGV0ZScgfCAnRmFpbGVkJztcbiAgam9iVHlwZTogJ1YyUXVlcnknO1xuICBpc1BrQ2h1bmtpbmdTdXBwb3J0ZWQ6IGJvb2xlYW47XG59O1xuXG5leHBvcnQgdHlwZSBKb2JJbmZvVjIgPSBCYXNlSm9iSW5mbyAmIHtcbiAgYXBleFByb2Nlc3NpbmdUaW1lOiBudW1iZXI7XG4gIGFwaUFjdGl2ZVByb2Nlc3NpbmdUaW1lOiBudW1iZXI7XG4gIGFzc2lnbm1lbnRSdWxlSWQ/OiBzdHJpbmc7XG4gIGNvbnRlbnRVcmw6IHN0cmluZztcbiAgZXJyb3JNZXNzYWdlPzogc3RyaW5nO1xuICBleHRlcm5hbElkRmllbGROYW1lPzogc3RyaW5nO1xuICBqb2JUeXBlOiAnQmlnT2JqZWN0SW5nZXN0JyB8ICdDbGFzc2ljJyB8ICdWMkluZ2VzdCc7XG4gIG9wZXJhdGlvbjogSW5nZXN0T3BlcmF0aW9uO1xuICBzdGF0ZTpcbiAgICB8ICdPcGVuJ1xuICAgIHwgJ1VwbG9hZENvbXBsZXRlJ1xuICAgIHwgJ0luUHJvZ3Jlc3MnXG4gICAgfCAnSm9iQ29tcGxldGUnXG4gICAgfCAnQWJvcnRlZCdcbiAgICB8ICdGYWlsZWQnO1xuICBudW1iZXJSZWNvcmRzRmFpbGVkOiBudW1iZXI7XG59O1xuXG5leHBvcnQgdHlwZSBJbmdlc3RKb2JWMlN1Y2Nlc3NmdWxSZXN1bHRzPFMgZXh0ZW5kcyBTY2hlbWE+ID0gQXJyYXk8XG4gIHtcbiAgICBzZl9fQ3JlYXRlZDogJ3RydWUnIHwgJ2ZhbHNlJztcbiAgICBzZl9fSWQ6IHN0cmluZztcbiAgfSAmIFNcbj47XG5cbmV4cG9ydCB0eXBlIEluZ2VzdEpvYlYyRmFpbGVkUmVzdWx0czxTIGV4dGVuZHMgU2NoZW1hPiA9IEFycmF5PFxuICB7XG4gICAgc2ZfX0Vycm9yOiBzdHJpbmc7XG4gICAgc2ZfX0lkOiBzdHJpbmc7XG4gIH0gJiBTXG4+O1xuXG5leHBvcnQgdHlwZSBJbmdlc3RKb2JWMlVucHJvY2Vzc2VkUmVjb3JkczxTIGV4dGVuZHMgU2NoZW1hPiA9IFNbXSB8IHN0cmluZztcblxuZXhwb3J0IHR5cGUgSW5nZXN0Sm9iVjJSZXN1bHRzPFMgZXh0ZW5kcyBTY2hlbWE+ID0ge1xuICBzdWNjZXNzZnVsUmVzdWx0czogSW5nZXN0Sm9iVjJTdWNjZXNzZnVsUmVzdWx0czxTPjtcbiAgZmFpbGVkUmVzdWx0czogSW5nZXN0Sm9iVjJGYWlsZWRSZXN1bHRzPFM+O1xuICB1bnByb2Nlc3NlZFJlY29yZHM6IEluZ2VzdEpvYlYyVW5wcm9jZXNzZWRSZWNvcmRzPFM+O1xufTtcblxudHlwZSBOZXdJbmdlc3RKb2JPcHRpb25zID0gUmVxdWlyZWQ8UGljazxKb2JJbmZvVjIsICdvYmplY3QnIHwgJ29wZXJhdGlvbic+PiAmXG4gIFBhcnRpYWw8XG4gICAgUGljazxcbiAgICAgIEpvYkluZm9WMixcbiAgICAgIHwgJ2Fzc2lnbm1lbnRSdWxlSWQnXG4gICAgICB8ICdjb2x1bW5EZWxpbWl0ZXInXG4gICAgICB8ICdleHRlcm5hbElkRmllbGROYW1lJ1xuICAgICAgfCAnbGluZUVuZGluZydcbiAgICAgIHwgJ2NvbnRlbnRUeXBlJ1xuICAgID5cbiAgPjtcblxudHlwZSBOZXdRdWVyeUpvYk9wdGlvbnMgPSB7XG4gIHF1ZXJ5OiBzdHJpbmc7XG4gIG9wZXJhdGlvbjogUXVlcnlKb2JJbmZvVjJbJ29wZXJhdGlvbiddO1xufSAmIFBhcnRpYWw8UGljazxRdWVyeUpvYkluZm9WMiwgJ2NvbHVtbkRlbGltaXRlcicgfCAnbGluZUVuZGluZyc+PjtcblxudHlwZSBDcmVhdGVJbmdlc3RKb2JWMk9wdGlvbnMgPSB7XG4gIGJvZHlQYXJhbXM6IE5ld0luZ2VzdEpvYk9wdGlvbnM7XG4gIHBvbGxpbmdPcHRpb25zOiBCdWxrVjJQb2xsaW5nT3B0aW9ucztcbn07XG5cbnR5cGUgRXhpc3RpbmdJbmdlc3RKb2JPcHRpb25zID0ge1xuICBpZDogc3RyaW5nO1xuICBwb2xsaW5nT3B0aW9uczogQnVsa1YyUG9sbGluZ09wdGlvbnM7XG59O1xuXG50eXBlIENyZWF0ZUluZ2VzdEpvYlYyUmVxdWVzdCA9IDxUPihyZXF1ZXN0OiBCdWxrUmVxdWVzdCkgPT4gU3RyZWFtUHJvbWlzZTxUPjtcblxudHlwZSBDcmVhdGVKb2JEYXRhVjJPcHRpb25zPFMgZXh0ZW5kcyBTY2hlbWE+ID0ge1xuICBqb2I6IEluZ2VzdEpvYlYyPFM+O1xuICBjcmVhdGVSZXF1ZXN0OiBDcmVhdGVJbmdlc3RKb2JWMlJlcXVlc3Q7XG59O1xuXG50eXBlIENyZWF0ZVF1ZXJ5Sm9iVjJPcHRpb25zID0ge1xuICBib2R5UGFyYW1zOiBOZXdRdWVyeUpvYk9wdGlvbnM7XG4gIHBvbGxpbmdPcHRpb25zOiBCdWxrVjJQb2xsaW5nT3B0aW9ucztcbn07XG5cbnR5cGUgRXhpc3RpbmdRdWVyeUpvYlYyT3B0aW9ucyA9IHtcbiAgaWQ6IHN0cmluZztcbiAgcG9sbGluZ09wdGlvbnM6IEJ1bGtWMlBvbGxpbmdPcHRpb25zO1xufTtcblxudHlwZSBCdWxrVjJQb2xsaW5nT3B0aW9ucyA9IHtcbiAgcG9sbEludGVydmFsOiBudW1iZXI7XG4gIHBvbGxUaW1lb3V0OiBudW1iZXI7XG59O1xuXG5jbGFzcyBKb2JQb2xsaW5nVGltZW91dEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBqb2JJZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKlxuICAgKi9cbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBqb2JJZDogc3RyaW5nKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gJ0pvYlBvbGxpbmdUaW1lb3V0JztcbiAgICB0aGlzLmpvYklkID0gam9iSWQ7XG4gIH1cbn1cblxuY2xhc3MgQnVsa0FwaVYyPFMgZXh0ZW5kcyBTY2hlbWE+IGV4dGVuZHMgSHR0cEFwaTxTPiB7XG4gIGhhc0Vycm9ySW5SZXNwb25zZUJvZHkoYm9keTogYW55KSB7XG4gICAgcmV0dXJuIChcbiAgICAgIEFycmF5LmlzQXJyYXkoYm9keSkgJiZcbiAgICAgIHR5cGVvZiBib2R5WzBdID09PSAnb2JqZWN0JyAmJlxuICAgICAgJ2Vycm9yQ29kZScgaW4gYm9keVswXVxuICAgICk7XG4gIH1cblxuICBpc1Nlc3Npb25FeHBpcmVkKHJlc3BvbnNlOiBIdHRwUmVzcG9uc2UpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKFxuICAgICAgcmVzcG9uc2Uuc3RhdHVzQ29kZSA9PT0gNDAxICYmXG4gICAgICByZXNwb25zZS5ib2R5LmluY2x1ZGVzKCdJTlZBTElEX1NFU1NJT05fSUQnKVxuICAgICk7XG4gIH1cblxuICBwYXJzZUVycm9yKGJvZHk6IGFueSkge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvckNvZGU6IGJvZHlbMF0uZXJyb3JDb2RlLFxuICAgICAgbWVzc2FnZTogYm9keVswXS5tZXNzYWdlLFxuICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEJ1bGtWMjxTIGV4dGVuZHMgU2NoZW1hPiB7XG4gIHByaXZhdGUgY29ubmVjdGlvbjogQ29ubmVjdGlvbjxTPjtcbiAgcHJpdmF0ZSBsb2dnZXI6IExvZ2dlcjtcblxuICAvKipcbiAgICogUG9sbGluZyBpbnRlcnZhbCBpbiBtaWxsaXNlY29uZHNcbiAgICpcbiAgICogRGVmYXVsdDogMTAwMCAoMSBzZWNvbmQpXG4gICAqL1xuICBwdWJsaWMgcG9sbEludGVydmFsID0gMTAwMDtcblxuICAvKipcbiAgICogUG9sbGluZyB0aW1lb3V0IGluIG1pbGxpc2Vjb25kc1xuICAgKlxuICAgKiBEZWZhdWx0OiAzMDAwMCAoMzAgc2Vjb25kcylcbiAgICovXG4gIHB1YmxpYyBwb2xsVGltZW91dCA9IDMwMDAwO1xuXG4gIGNvbnN0cnVjdG9yKGNvbm5lY3Rpb246IENvbm5lY3Rpb248Uz4pIHtcbiAgICB0aGlzLmNvbm5lY3Rpb24gPSBjb25uZWN0aW9uO1xuICAgIHRoaXMubG9nZ2VyID0gdGhpcy5jb25uZWN0aW9uLl9sb2dMZXZlbFxuICAgICAgPyBnZXRMb2dnZXIoJ2J1bGsyJykuY3JlYXRlSW5zdGFuY2UodGhpcy5jb25uZWN0aW9uLl9sb2dMZXZlbClcbiAgICAgIDogZ2V0TG9nZ2VyKCdidWxrMicpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiBhbiBpbmdlc3Qgam9iIG9iamVjdC5cbiAgICpcbiAgICogQHBhcmFtcyB7TmV3SW5nZXN0Sm9iT3B0aW9uc30gb3B0aW9ucyBvYmplY3RcbiAgICogQHJldHVybnMge0luZ2VzdEpvYlYyfSBBbiBpbmdlc3Qgam9iIGluc3RhbmNlXG4gICAqIEBleGFtcGxlXG4gICAqIC8vIFVwc2VydCByZWNvcmRzIHRvIHRoZSBBY2NvdW50IG9iamVjdC5cbiAgICpcbiAgICogY29uc3Qgam9iID0gY29ubmVjdGlvbi5idWxrMi5jcmVhdGVKb2Ioe1xuICAgKiAgIG9wZXJhdGlvbjogJ2luc2VydCdcbiAgICogICBvYmplY3Q6ICdBY2NvdW50JyxcbiAgICogfSk7XG4gICAqXG4gICAqIC8vIGNyZWF0ZSB0aGUgam9iIGluIHRoZSBvcmdcbiAgICogYXdhaXQgam9iLm9wZW4oKVxuICAgKlxuICAgKiAvLyB1cGxvYWQgZGF0YVxuICAgKiBhd2FpdCBqb2IudXBsb2FkRGF0YShjc3ZGaWxlKVxuICAgKlxuICAgKiAvLyBmaW5pc2hlZCB1cGxvYWRpbmcgZGF0YSwgbWFyayBpdCBhcyByZWFkeSBmb3IgcHJvY2Vzc2luZ1xuICAgKiBhd2FpdCBqb2IuY2xvc2UoKVxuICAgKi9cbiAgcHVibGljIGNyZWF0ZUpvYihvcHRpb25zOiBOZXdJbmdlc3RKb2JPcHRpb25zKTogSW5nZXN0Sm9iVjI8Uz4ge1xuICAgIHJldHVybiBuZXcgSW5nZXN0Sm9iVjIodGhpcy5jb25uZWN0aW9uLCB7XG4gICAgICBib2R5UGFyYW1zOiBvcHRpb25zLFxuICAgICAgcG9sbGluZ09wdGlvbnM6IHRoaXMsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFuIGluZ2VzdCBvciBxdWVyeSBqb2IgaW5zdGFuY2Ugc3BlY2lmaWVkIGJ5IGEgZ2l2ZW4gam9iIElEXG4gICAqXG4gICAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgb2JqZWN0IHdpdGggYSBqb2IgSURcbiAgICogQHJldHVybnMgSW5nZXN0Sm9iVjIgQW4gaW5nZXN0IGpvYlxuICAgKi9cbiAgcHVibGljIGpvYihcbiAgICB0eXBlOiAncXVlcnknLFxuICAgIG9wdGlvbnM6IFBpY2s8RXhpc3RpbmdRdWVyeUpvYlYyT3B0aW9ucywgJ2lkJz4sXG4gICk6IFF1ZXJ5Sm9iVjI8Uz47XG4gIHB1YmxpYyBqb2IoXG4gICAgdHlwZTogJ2luZ2VzdCcsXG4gICAgb3B0aW9uczogUGljazxFeGlzdGluZ0luZ2VzdEpvYk9wdGlvbnMsICdpZCc+LFxuICApOiBJbmdlc3RKb2JWMjxTPjtcbiAgcHVibGljIGpvYihcbiAgICB0eXBlOiAnaW5nZXN0JyB8ICdxdWVyeScgPSAnaW5nZXN0JyxcbiAgICBvcHRpb25zOiBFeGlzdGluZ0luZ2VzdEpvYk9wdGlvbnMgfCBFeGlzdGluZ1F1ZXJ5Sm9iVjJPcHRpb25zLFxuICApOiBJbmdlc3RKb2JWMjxTPiB8IFF1ZXJ5Sm9iVjI8Uz4ge1xuICAgIGlmICh0eXBlID09PSAnaW5nZXN0Jykge1xuICAgICAgcmV0dXJuIG5ldyBJbmdlc3RKb2JWMih0aGlzLmNvbm5lY3Rpb24sIHtcbiAgICAgICAgaWQ6IG9wdGlvbnMuaWQsXG4gICAgICAgIHBvbGxpbmdPcHRpb25zOiB0aGlzLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBuZXcgUXVlcnlKb2JWMih0aGlzLmNvbm5lY3Rpb24sIHtcbiAgICAgICAgaWQ6IG9wdGlvbnMuaWQsXG4gICAgICAgIHBvbGxpbmdPcHRpb25zOiB0aGlzLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSwgdXBsb2FkLCBhbmQgc3RhcnQgYnVsa2xvYWQgam9iXG4gICAqL1xuICBhc3luYyBsb2FkQW5kV2FpdEZvclJlc3VsdHMoXG4gICAgb3B0aW9uczogTmV3SW5nZXN0Sm9iT3B0aW9ucyAmXG4gICAgICBQYXJ0aWFsPEJ1bGtWMlBvbGxpbmdPcHRpb25zPiAmIHtcbiAgICAgICAgaW5wdXQ6IFJlY29yZFtdIHwgUmVhZGFibGUgfCBzdHJpbmc7XG4gICAgICB9LFxuICApOiBQcm9taXNlPEluZ2VzdEpvYlYyUmVzdWx0czxTPj4ge1xuICAgIGlmICghb3B0aW9ucy5wb2xsVGltZW91dCkgb3B0aW9ucy5wb2xsVGltZW91dCA9IHRoaXMucG9sbFRpbWVvdXQ7XG4gICAgaWYgKCFvcHRpb25zLnBvbGxJbnRlcnZhbCkgb3B0aW9ucy5wb2xsSW50ZXJ2YWwgPSB0aGlzLnBvbGxJbnRlcnZhbDtcblxuICAgIGNvbnN0IHsgcG9sbEludGVydmFsLCBwb2xsVGltZW91dCwgaW5wdXQsIC4uLmNyZWF0ZUpvYk9wdHMgfSA9IG9wdGlvbnM7XG5cbiAgICBjb25zdCBqb2IgPSB0aGlzLmNyZWF0ZUpvYihjcmVhdGVKb2JPcHRzKTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgam9iLm9wZW4oKTtcbiAgICAgIGF3YWl0IGpvYi51cGxvYWREYXRhKGlucHV0KTtcbiAgICAgIGF3YWl0IGpvYi5jbG9zZSgpO1xuICAgICAgYXdhaXQgam9iLnBvbGwocG9sbEludGVydmFsLCBwb2xsVGltZW91dCk7XG4gICAgICByZXR1cm4gYXdhaXQgam9iLmdldEFsbFJlc3VsdHMoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZXJyID0gZXJyb3IgYXMgRXJyb3I7XG4gICAgICB0aGlzLmxvZ2dlci5lcnJvcihgYnVsayBsb2FkIGZhaWxlZCBkdWUgdG86ICR7ZXJyLm1lc3NhZ2V9YCk7XG5cbiAgICAgIGlmIChlcnIubmFtZSAhPT0gJ0pvYlBvbGxpbmdUaW1lb3V0RXJyb3InKSB7XG4gICAgICAgIC8vIGZpcmVzIG9mZiBvbmUgbGFzdCBhdHRlbXB0IHRvIGNsZWFuIHVwIGFuZCBpZ25vcmVzIHRoZSByZXN1bHQgfCBlcnJvclxuICAgICAgICBqb2IuZGVsZXRlKCkuY2F0Y2goKGlnbm9yZWQpID0+IGlnbm9yZWQpO1xuICAgICAgfVxuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlIGJ1bGsgcXVlcnkgYW5kIGdldCBhIHJlY29yZCBzdHJlYW0uXG4gICAqXG4gICAqIERlZmF1bHQgdGltZW91dDogMTAwMDBtc1xuICAgKlxuICAgKiBAcGFyYW0gc29xbCBTT1FMIHF1ZXJ5XG4gICAqIEBwYXJhbSBvcHRpb25zXG4gICAqXG4gICAqIEByZXR1cm5zIHtSZWNvcmRTdHJlYW19IC0gUmVjb3JkIHN0cmVhbSwgY29udmVydGlibGUgdG8gYSBDU1YgZGF0YSBzdHJlYW1cbiAgICovXG4gIGFzeW5jIHF1ZXJ5KFxuICAgIHNvcWw6IHN0cmluZyxcbiAgICBvcHRpb25zPzogUGFydGlhbDxCdWxrVjJQb2xsaW5nT3B0aW9ucz4gJiB7XG4gICAgICBzY2FuQWxsPzogYm9vbGVhbjtcbiAgICAgIGNvbHVtbkRlbGltaXRlcj86IFF1ZXJ5Sm9iSW5mb1YyWydjb2x1bW5EZWxpbWl0ZXInXTtcbiAgICAgIGxpbmVFbmRpbmc/OiBRdWVyeUpvYkluZm9WMlsnbGluZUVuZGluZyddO1xuICAgIH0sXG4gICk6IFByb21pc2U8UGFyc2FibGU8UmVjb3JkPj4ge1xuICAgIGNvbnN0IHF1ZXJ5Sm9iID0gbmV3IFF1ZXJ5Sm9iVjIodGhpcy5jb25uZWN0aW9uLCB7XG4gICAgICBib2R5UGFyYW1zOiB7XG4gICAgICAgIHF1ZXJ5OiBzb3FsLFxuICAgICAgICBvcGVyYXRpb246IG9wdGlvbnM/LnNjYW5BbGwgPyAncXVlcnlBbGwnIDogJ3F1ZXJ5JyxcbiAgICAgICAgY29sdW1uRGVsaW1pdGVyOiBvcHRpb25zPy5jb2x1bW5EZWxpbWl0ZXIsXG4gICAgICAgIGxpbmVFbmRpbmc6IG9wdGlvbnM/LmxpbmVFbmRpbmcsXG4gICAgICB9LFxuICAgICAgcG9sbGluZ09wdGlvbnM6IHRoaXMsXG4gICAgfSk7XG5cbiAgICBjb25zdCByZWNvcmRTdHJlYW0gPSBuZXcgUGFyc2FibGUoKTtcbiAgICBjb25zdCBkYXRhU3RyZWFtID0gcmVjb3JkU3RyZWFtLnN0cmVhbSgnY3N2Jyk7XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgcXVlcnlKb2Iub3BlbigpO1xuICAgICAgYXdhaXQgcXVlcnlKb2IucG9sbChvcHRpb25zPy5wb2xsSW50ZXJ2YWwsIG9wdGlvbnM/LnBvbGxUaW1lb3V0KTtcblxuICAgICAgY29uc3QgcXVlcnlSZWNvcmRzU3RyZWFtID0gYXdhaXQgcXVlcnlKb2JcbiAgICAgICAgLnJlc3VsdCgpXG4gICAgICAgIC50aGVuKChzKSA9PiBzLnN0cmVhbSgpKTtcbiAgICAgIHF1ZXJ5UmVjb3Jkc1N0cmVhbS5waXBlKGRhdGFTdHJlYW0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBlcnIgPSBlcnJvciBhcyBFcnJvcjtcbiAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGBidWxrIHF1ZXJ5IGZhaWxlZCBkdWUgdG86ICR7ZXJyLm1lc3NhZ2V9YCk7XG5cbiAgICAgIGlmIChlcnIubmFtZSAhPT0gJ0pvYlBvbGxpbmdUaW1lb3V0RXJyb3InKSB7XG4gICAgICAgIC8vIGZpcmVzIG9mZiBvbmUgbGFzdCBhdHRlbXB0IHRvIGNsZWFuIHVwIGFuZCBpZ25vcmVzIHRoZSByZXN1bHQgfCBlcnJvclxuICAgICAgICBxdWVyeUpvYi5kZWxldGUoKS5jYXRjaCgoaWdub3JlZCkgPT4gaWdub3JlZCk7XG4gICAgICB9XG5cbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gICAgcmV0dXJuIHJlY29yZFN0cmVhbTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgUXVlcnlKb2JWMjxTIGV4dGVuZHMgU2NoZW1hPiBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIHByaXZhdGUgcmVhZG9ubHkgY29ubmVjdGlvbjogQ29ubmVjdGlvbjxTPjtcbiAgcHJpdmF0ZSByZWFkb25seSBsb2dnZXI6IExvZ2dlcjtcbiAgcHJpdmF0ZSByZWFkb25seSBfaWQ/OiBzdHJpbmc7XG4gIHByaXZhdGUgcmVhZG9ubHkgYm9keVBhcmFtcz86IE5ld1F1ZXJ5Sm9iT3B0aW9ucztcbiAgcHJpdmF0ZSByZWFkb25seSBwb2xsaW5nT3B0aW9uczogQnVsa1YyUG9sbGluZ09wdGlvbnM7XG4gIHByaXZhdGUgZXJyb3I6IEVycm9yIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIGpvYkluZm8/OiBRdWVyeUpvYkluZm9WMjtcbiAgcHJpdmF0ZSBsb2NhdG9yPzogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGNvbm46IENvbm5lY3Rpb248Uz4sXG4gICAgb3B0aW9uczogRXhpc3RpbmdRdWVyeUpvYlYyT3B0aW9ucyB8IENyZWF0ZVF1ZXJ5Sm9iVjJPcHRpb25zLFxuICApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuY29ubmVjdGlvbiA9IGNvbm47XG4gICAgdGhpcy5sb2dnZXIgPSB0aGlzLmNvbm5lY3Rpb24uX2xvZ0xldmVsXG4gICAgICA/IGdldExvZ2dlcignYnVsazI6UXVlcnlKb2JWMicpLmNyZWF0ZUluc3RhbmNlKHRoaXMuY29ubmVjdGlvbi5fbG9nTGV2ZWwpXG4gICAgICA6IGdldExvZ2dlcignYnVsazI6UXVlcnlKb2JWMicpO1xuICAgIGlmICgnaWQnIGluIG9wdGlvbnMpIHtcbiAgICAgIHRoaXMuX2lkID0gb3B0aW9ucy5pZDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ib2R5UGFyYW1zID0gb3B0aW9ucy5ib2R5UGFyYW1zO1xuICAgIH1cbiAgICB0aGlzLnBvbGxpbmdPcHRpb25zID0gb3B0aW9ucy5wb2xsaW5nT3B0aW9ucztcbiAgICAvLyBkZWZhdWx0IGVycm9yIGhhbmRsZXIgdG8ga2VlcCB0aGUgbGF0ZXN0IGVycm9yXG4gICAgdGhpcy5vbignZXJyb3InLCAoZXJyb3IpID0+ICh0aGlzLmVycm9yID0gZXJyb3IpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHF1ZXJ5IGpvYiBJRC5cbiAgICpcbiAgICogQHJldHVybnMge3N0cmluZ30gcXVlcnkgam9iIElkLlxuICAgKi9cbiAgcHVibGljIGdldCBpZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmpvYkluZm8gPyB0aGlzLmpvYkluZm8uaWQgOiAodGhpcy5faWQgYXMgc3RyaW5nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHF1ZXJ5IGpvYiBpbmZvLlxuICAgKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxRdWVyeUpvYkluZm9WMj59IHF1ZXJ5IGpvYiBpbmZvcm1hdGlvbi5cbiAgICovXG4gIHB1YmxpYyBnZXRJbmZvKCk6IFF1ZXJ5Sm9iSW5mb1YyIHtcbiAgICBpZiAodGhpcy5qb2JJbmZvKSB7XG4gICAgICByZXR1cm4gdGhpcy5qb2JJbmZvO1xuICAgIH1cblxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdObyBpbnRlcm5hbCBqb2IgaW5mby4gTWFrZSBzdXJlIHRvIGNhbGwgYGF3YWl0IGpvYi5jaGVja2AuJyxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBxdWVyeSBqb2JcbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2U8UXVlcnlKb2JJbmZvVjI+fSBqb2IgaW5mb3JtYXRpb24uXG4gICAqL1xuICBhc3luYyBvcGVuKCk6IFByb21pc2U8UXVlcnlKb2JJbmZvVjI+IHtcbiAgICBpZiAoIXRoaXMuYm9keVBhcmFtcykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkIGJvZHkgcGFyYW1zIHRvIG9wZW4gYSBuZXcgcXVlcnkgam9iLicpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgdGhpcy5qb2JJbmZvID0gYXdhaXQgdGhpcy5jcmVhdGVRdWVyeVJlcXVlc3Q8UXVlcnlKb2JJbmZvVjI+KHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHRoaXMuYm9keVBhcmFtcyksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxuICAgICAgICB9LFxuICAgICAgICByZXNwb25zZVR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIH0pO1xuICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYFN1Y2Nlc3NmdWxseSBjcmVhdGVkIGpvYiAke3RoaXMuaWR9YCk7XG4gICAgICB0aGlzLmVtaXQoJ29wZW4nLCB0aGlzLmpvYkluZm8pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuam9iSW5mbztcbiAgfVxuXG4gIC8qKlxuICAgKiBBYm9ydCB0aGUgam9iXG4gICAqXG4gICAqIFRoZSAnYWJvcnRlZCcgZXZlbnQgaXMgZW1pdHRlZCB3aGVuIHRoZSBqb2Igc3VjY2Vzc2Z1bGx5IGFib3J0cy5cbiAgICogQHJldHVybnMge1Byb21pc2U8UXVlcnlKb2JJbmZvVjI+fSBqb2IgaW5mb3JtYXRpb24uXG4gICAqL1xuICBhc3luYyBhYm9ydCgpOiBQcm9taXNlPFF1ZXJ5Sm9iSW5mb1YyPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0YXRlOiBRdWVyeUpvYkluZm9WMlsnc3RhdGUnXSA9ICdBYm9ydGVkJztcbiAgICAgIHRoaXMuam9iSW5mbyA9IGF3YWl0IHRoaXMuY3JlYXRlUXVlcnlSZXF1ZXN0PFF1ZXJ5Sm9iSW5mb1YyPih7XG4gICAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgICAgcGF0aDogYC8ke3RoaXMuaWR9YCxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBzdGF0ZSB9KSxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnIH0sXG4gICAgICAgIHJlc3BvbnNlVHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSk7XG4gICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhgU3VjY2Vzc2Z1bGx5IGFib3J0ZWQgam9iICR7dGhpcy5pZH1gKTtcbiAgICAgIHJldHVybiB0aGlzLmpvYkluZm87XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUG9sbCBmb3IgdGhlIHN0YXRlIG9mIHRoZSBwcm9jZXNzaW5nIGZvciB0aGUgam9iLlxuICAgKlxuICAgKiBAcGFyYW0gaW50ZXJ2YWwgUG9sbGluZyBpbnRlcnZhbCBpbiBtaWxsaXNlY29uZHNcbiAgICogQHBhcmFtIHRpbWVvdXQgUG9sbGluZyB0aW1lb3V0IGluIG1pbGxpc2Vjb25kc1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSZWNvcmRbXT59IEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGpvYiBmaW5pc2hlZCBiZWluZyBwcm9jZXNzZWQuXG4gICAqL1xuICBhc3luYyBwb2xsKFxuICAgIGludGVydmFsOiBudW1iZXIgPSB0aGlzLnBvbGxpbmdPcHRpb25zLnBvbGxJbnRlcnZhbCxcbiAgICB0aW1lb3V0OiBudW1iZXIgPSB0aGlzLnBvbGxpbmdPcHRpb25zLnBvbGxUaW1lb3V0LFxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBqb2JJZCA9IHRoaXMuaWQ7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBlbmRUaW1lID0gc3RhcnRUaW1lICsgdGltZW91dDtcblxuICAgIHRoaXMubG9nZ2VyLmRlYnVnKCdTdGFydCBwb2xsaW5nIGZvciBqb2Igc3RhdHVzJyk7XG4gICAgdGhpcy5sb2dnZXIuZGVidWcoXG4gICAgICBgUG9sbGluZyBvcHRpb25zOiB0aW1lb3V0OiR7dGltZW91dH1tcyB8IGludGVydmFsOiAke2ludGVydmFsfW1zLmAsXG4gICAgKTtcblxuICAgIGlmICh0aW1lb3V0ID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgSm9iUG9sbGluZ1RpbWVvdXRFcnJvcihcbiAgICAgICAgYFNraXBwaW5nIHBvbGxpbmcgYmVjYXVzZSBvZiB0aW1lb3V0ID0gMG1zLiBKb2IgSWQgPSAke2pvYklkfWAsXG4gICAgICAgIGpvYklkLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICB3aGlsZSAoZW5kVGltZSA+IERhdGUubm93KCkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuY2hlY2soKTtcbiAgICAgICAgc3dpdGNoIChyZXMuc3RhdGUpIHtcbiAgICAgICAgICBjYXNlICdBYm9ydGVkJzpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSm9iIGhhcyBiZWVuIGFib3J0ZWQnKTtcbiAgICAgICAgICBjYXNlICdVcGxvYWRDb21wbGV0ZSc6XG4gICAgICAgICAgY2FzZSAnSW5Qcm9ncmVzcyc6XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2luUHJvZ3Jlc3MnLCByZXMpO1xuICAgICAgICAgICAgYXdhaXQgZGVsYXkoaW50ZXJ2YWwpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnRmFpbGVkJzpcbiAgICAgICAgICAgIC8vIHVubGlrZSBpbmdlc3Qgam9icywgdGhlIEFQSSBkb2Vzbid0IHJldHVybiBhbiBlcnJvciBtc2c6XG4gICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5zYWxlc2ZvcmNlLmNvbS9kb2NzL2F0bGFzLmVuLXVzLmFwaV9hc3luY2gubWV0YS9hcGlfYXN5bmNoL3F1ZXJ5X2dldF9vbmVfam9iLmh0bVxuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcocmVzKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUXVlcnkgam9iIGZhaWxlZCB0byBjb21wbGV0ZScpO1xuICAgICAgICAgIGNhc2UgJ0pvYkNvbXBsZXRlJzpcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGBKb2IgJHt0aGlzLmlkfSB3YXMgc3VjY2Vzc2Z1bGx5IHByb2Nlc3NlZC5gKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnam9iQ29tcGxldGUnLCByZXMpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB0aW1lb3V0RXJyb3IgPSBuZXcgSm9iUG9sbGluZ1RpbWVvdXRFcnJvcihcbiAgICAgIGBQb2xsaW5nIHRpbWVkIG91dCBhZnRlciAke3RpbWVvdXR9bXMuIEpvYiBJZCA9ICR7am9iSWR9YCxcbiAgICAgIGpvYklkLFxuICAgICk7XG4gICAgdGhpcy5lbWl0KCdlcnJvcicsIHRpbWVvdXRFcnJvcik7XG4gICAgdGhyb3cgdGltZW91dEVycm9yO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIHRoZSBsYXRlc3Qgam9iIHN0YXR1c1xuICAgKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxRdWVyeUpvYkluZm9WMj59IGpvYiBpbmZvcm1hdGlvbi5cbiAgICovXG4gIGFzeW5jIGNoZWNrKCk6IFByb21pc2U8UXVlcnlKb2JJbmZvVjI+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgam9iSW5mbyA9IGF3YWl0IHRoaXMuY3JlYXRlUXVlcnlSZXF1ZXN0PFF1ZXJ5Sm9iSW5mb1YyPih7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIHBhdGg6IGAvJHt0aGlzLmlkfWAsXG4gICAgICAgIHJlc3BvbnNlVHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSk7XG4gICAgICB0aGlzLmpvYkluZm8gPSBqb2JJbmZvO1xuICAgICAgcmV0dXJuIGpvYkluZm87XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSByZXN1bHRzIGZvciBhIHF1ZXJ5IGpvYiBhcyBhIHJlY29yZCBzdHJlYW1cbiAgICpcbiAgICogVGhpcyBtZXRob2QgYXNzdW1lcyB0aGUgam9iIGZpbmlzaGVkIGJlaW5nIHByb2Nlc3NlZFxuICAgKiBAcmV0dXJucyB7UmVjb3JkU3RyZWFtfSAtIFJlY29yZCBzdHJlYW0sIGNvbnZlcnRpYmxlIHRvIGEgQ1NWIGRhdGEgc3RyZWFtXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgcmVzdWx0KCk6IFByb21pc2U8UGFyc2FibGU8UmVjb3JkPj4ge1xuICAgIGNvbnN0IHJlc3VsdFN0cmVhbSA9IG5ldyBQYXJzYWJsZSgpO1xuICAgIGNvbnN0IHJlc3VsdERhdGFTdHJlYW0gPSByZXN1bHRTdHJlYW0uc3RyZWFtKCdjc3YnKTtcblxuICAgIGNvbnN0IHJlc3VsdHNQYXRoID0gYC8ke3RoaXMuaWR9L3Jlc3VsdHNgO1xuXG4gICAgd2hpbGUgKHRoaXMubG9jYXRvciAhPT0gJ251bGwnKSB7XG4gICAgICBjb25zdCByZXNQcm9taXNlID0gdGhpcy5jcmVhdGVRdWVyeVJlcXVlc3Qoe1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBwYXRoOiB0aGlzLmxvY2F0b3JcbiAgICAgICAgICAvLyByZXN1bHRzUGF0aCBzdGFydHMgd2l0aCAnLydcbiAgICAgICAgICA/IGAke3Jlc3VsdHNQYXRofT9sb2NhdG9yPSR7dGhpcy5sb2NhdG9yfWBcbiAgICAgICAgICA6IHJlc3VsdHNQYXRoLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQWNjZXB0OiAndGV4dC9jc3YnLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIHJlc1Byb21pc2Uuc3RyZWFtKCkucGlwZShyZXN1bHREYXRhU3RyZWFtKTtcbiAgICAgIGF3YWl0IHJlc1Byb21pc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdFN0cmVhbTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGVzIGEgcXVlcnkgam9iLlxuICAgKi9cbiAgYXN5bmMgZGVsZXRlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiB0aGlzLmNyZWF0ZVF1ZXJ5UmVxdWVzdDx2b2lkPih7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgcGF0aDogYC8ke3RoaXMuaWR9YCxcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlUXVlcnlSZXF1ZXN0PFQ+KHJlcXVlc3Q6IEJ1bGtSZXF1ZXN0KSB7XG4gICAgY29uc3QgeyBwYXRoLCByZXNwb25zZVR5cGUgfSA9IHJlcXVlc3Q7XG5cbiAgICBjb25zdCBiYXNlUGF0aCA9IGBzZXJ2aWNlcy9kYXRhL3Yke3RoaXMuY29ubmVjdGlvbi52ZXJzaW9ufS9qb2JzL3F1ZXJ5YDtcblxuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoXG4gICAgICBwYXRoID8gYmFzZVBhdGggKyBwYXRoIDogYmFzZVBhdGgsXG4gICAgICB0aGlzLmNvbm5lY3Rpb24uaW5zdGFuY2VVcmwsXG4gICAgKS50b1N0cmluZygpO1xuXG4gICAgY29uc3QgaHR0cEFwaSA9IG5ldyBCdWxrQXBpVjIodGhpcy5jb25uZWN0aW9uLCB7IHJlc3BvbnNlVHlwZSB9KTtcblxuICAgIGh0dHBBcGkub24oJ3Jlc3BvbnNlJywgKHJlc3BvbnNlOiBIdHRwUmVzcG9uc2UpID0+IHtcbiAgICAgIHRoaXMubG9jYXRvciA9IHJlc3BvbnNlLmhlYWRlcnNbJ3Nmb3JjZS1sb2NhdG9yJ107XG4gICAgICB0aGlzLmxvZ2dlci5kZWJ1Zyhgc2ZvcmNlLWxvY2F0b3I6ICR7dGhpcy5sb2NhdG9yfWApO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGh0dHBBcGkucmVxdWVzdDxUPih7XG4gICAgICAuLi5yZXF1ZXN0LFxuICAgICAgdXJsLFxuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogQ2xhc3MgZm9yIEJ1bGsgQVBJIFYyIEluZ2VzdCBKb2JcbiAqL1xuZXhwb3J0IGNsYXNzIEluZ2VzdEpvYlYyPFMgZXh0ZW5kcyBTY2hlbWE+IGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgcHJpdmF0ZSByZWFkb25seSBjb25uZWN0aW9uOiBDb25uZWN0aW9uPFM+O1xuICBwcml2YXRlIHJlYWRvbmx5IGxvZ2dlcjogTG9nZ2VyO1xuICBwcml2YXRlIHJlYWRvbmx5IF9pZD86IHN0cmluZztcbiAgcHJpdmF0ZSByZWFkb25seSBib2R5UGFyYW1zPzogTmV3SW5nZXN0Sm9iT3B0aW9ucztcbiAgcHJpdmF0ZSByZWFkb25seSBqb2JEYXRhOiBKb2JEYXRhVjI8Uz47XG4gIHByaXZhdGUgcG9sbGluZ09wdGlvbnM6IEJ1bGtWMlBvbGxpbmdPcHRpb25zO1xuICBwcml2YXRlIGJ1bGtKb2JTdWNjZXNzZnVsUmVzdWx0cz86IEluZ2VzdEpvYlYyU3VjY2Vzc2Z1bFJlc3VsdHM8Uz47XG4gIHByaXZhdGUgYnVsa0pvYkZhaWxlZFJlc3VsdHM/OiBJbmdlc3RKb2JWMkZhaWxlZFJlc3VsdHM8Uz47XG4gIHByaXZhdGUgYnVsa0pvYlVucHJvY2Vzc2VkUmVjb3Jkcz86IEluZ2VzdEpvYlYyVW5wcm9jZXNzZWRSZWNvcmRzPFM+O1xuICBwcml2YXRlIGVycm9yOiBFcnJvciB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBqb2JJbmZvPzogSm9iSW5mb1YyO1xuXG4gIC8qKlxuICAgKlxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgY29ubjogQ29ubmVjdGlvbjxTPixcbiAgICBvcHRpb25zOiBDcmVhdGVJbmdlc3RKb2JWMk9wdGlvbnMgfCBFeGlzdGluZ0luZ2VzdEpvYk9wdGlvbnMsXG4gICkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLmNvbm5lY3Rpb24gPSBjb25uO1xuICAgIHRoaXMubG9nZ2VyID0gdGhpcy5jb25uZWN0aW9uLl9sb2dMZXZlbFxuICAgICAgPyBnZXRMb2dnZXIoJ2J1bGsyOkluZ2VzdEpvYlYyJykuY3JlYXRlSW5zdGFuY2UodGhpcy5jb25uZWN0aW9uLl9sb2dMZXZlbClcbiAgICAgIDogZ2V0TG9nZ2VyKCdidWxrMjpJbmdlc3RKb2JWMicpO1xuICAgIHRoaXMucG9sbGluZ09wdGlvbnMgPSBvcHRpb25zLnBvbGxpbmdPcHRpb25zO1xuICAgIGlmICgnaWQnIGluIG9wdGlvbnMpIHtcbiAgICAgIHRoaXMuX2lkID0gb3B0aW9ucy5pZDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ib2R5UGFyYW1zID0gb3B0aW9ucy5ib2R5UGFyYW1zO1xuICAgIH1cbiAgICB0aGlzLmpvYkRhdGEgPSBuZXcgSm9iRGF0YVYyPFM+KHtcbiAgICAgIGNyZWF0ZVJlcXVlc3Q6IChyZXF1ZXN0KSA9PiB0aGlzLmNyZWF0ZUluZ2VzdFJlcXVlc3QocmVxdWVzdCksXG4gICAgICBqb2I6IHRoaXMsXG4gICAgfSk7XG4gICAgLy8gZGVmYXVsdCBlcnJvciBoYW5kbGVyIHRvIGtlZXAgdGhlIGxhdGVzdCBlcnJvclxuICAgIHRoaXMub24oJ2Vycm9yJywgKGVycm9yKSA9PiAodGhpcy5lcnJvciA9IGVycm9yKSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBxdWVyeSBqb2IgSUQuXG4gICAqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IHF1ZXJ5IGpvYiBJZC5cbiAgICovXG4gIHB1YmxpYyBnZXQgaWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5qb2JJbmZvID8gdGhpcy5qb2JJbmZvLmlkIDogKHRoaXMuX2lkIGFzIHN0cmluZyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBxdWVyeSBqb2IgaW5mby5cbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2U8UXVlcnlKb2JJbmZvVjI+fSBpbmdlc3Qgam9iIGluZm9ybWF0aW9uLlxuICAgKi9cbiAgcHVibGljIGdldEluZm8oKTogSm9iSW5mb1YyIHtcbiAgICBpZiAodGhpcy5qb2JJbmZvKSB7XG4gICAgICByZXR1cm4gdGhpcy5qb2JJbmZvO1xuICAgIH1cblxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdObyBpbnRlcm5hbCBqb2IgaW5mby4gTWFrZSBzdXJlIHRvIGNhbGwgYGF3YWl0IGpvYi5jaGVja2AuJyxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIGpvYiByZXByZXNlbnRpbmcgYSBidWxrIG9wZXJhdGlvbiBpbiB0aGUgb3JnXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPFF1ZXJ5Sm9iSW5mb1YyPn0gam9iIGluZm9ybWF0aW9uLlxuICAgKi9cbiAgYXN5bmMgb3BlbigpOiBQcm9taXNlPFBhcnRpYWw8Sm9iSW5mb1YyPj4ge1xuICAgIGlmICghdGhpcy5ib2R5UGFyYW1zKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgYm9keSBwYXJhbXMgdG8gb3BlbiBhIG5ldyBpbmdlc3Qgam9iLicpO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICB0aGlzLmpvYkluZm8gPSBhd2FpdCB0aGlzLmNyZWF0ZUluZ2VzdFJlcXVlc3Q8Sm9iSW5mb1YyPih7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh0aGlzLmJvZHlQYXJhbXMpLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcbiAgICAgICAgfSxcbiAgICAgICAgcmVzcG9uc2VUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9KTtcbiAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGBTdWNjZXNzZnVsbHkgY3JlYXRlZCBqb2IgJHt0aGlzLmlkfWApO1xuICAgICAgdGhpcy5lbWl0KCdvcGVuJyk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5qb2JJbmZvO1xuICB9XG5cbiAgLyoqIFVwbG9hZCBkYXRhIGZvciBhIGpvYiBpbiBDU1YgZm9ybWF0XG4gICAqXG4gICAqICBAcGFyYW0gaW5wdXQgQ1NWIGFzIGEgc3RyaW5nLCBvciBhcnJheSBvZiByZWNvcmRzIG9yIHJlYWRhYmxlIHN0cmVhbVxuICAgKi9cbiAgYXN5bmMgdXBsb2FkRGF0YShpbnB1dDogc3RyaW5nIHwgUmVjb3JkW10gfCBSZWFkYWJsZSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IHRoaXMuam9iRGF0YS5leGVjdXRlKGlucHV0KS5yZXN1bHQ7XG4gICAgdGhpcy5sb2dnZXIuZGVidWcoYFN1Y2Nlc3NmdWxseSB1cGxvYWRlZCBkYXRhIHRvIGpvYiAke3RoaXMuaWR9YCk7XG4gIH1cblxuICAvKipcbiAgICogQ2xvc2Ugb3BlbmVkIGpvYlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCB3aWxsIG5vdGlmeSB0aGUgb3JnICB0aGF0IHRoZSB1cGxvYWQgb2Ygam9iIGRhdGEgaXMgY29tcGxldGUgYW5kIGlzIHJlYWR5IGZvciBwcm9jZXNzaW5nLlxuICAgKi9cbiAgYXN5bmMgY2xvc2UoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0YXRlOiBKb2JJbmZvVjJbJ3N0YXRlJ10gPSAnVXBsb2FkQ29tcGxldGUnO1xuICAgICAgdGhpcy5qb2JJbmZvID0gYXdhaXQgdGhpcy5jcmVhdGVJbmdlc3RSZXF1ZXN0PEpvYkluZm9WMj4oe1xuICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICAgIHBhdGg6IGAvJHt0aGlzLmlkfWAsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgc3RhdGUgfSksXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyB9LFxuICAgICAgICByZXNwb25zZVR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIH0pO1xuICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYFN1Y2Nlc3NmdWxseSBjbG9zZWQgam9iICR7dGhpcy5pZH1gKTtcbiAgICAgIHRoaXMuZW1pdCgnY2xvc2UnKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHN0YXR1cyB0byBhYm9ydFxuICAgKi9cbiAgYXN5bmMgYWJvcnQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0YXRlOiBKb2JJbmZvVjJbJ3N0YXRlJ10gPSAnQWJvcnRlZCc7XG4gICAgICB0aGlzLmpvYkluZm8gPSBhd2FpdCB0aGlzLmNyZWF0ZUluZ2VzdFJlcXVlc3Q8Sm9iSW5mb1YyPih7XG4gICAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgICAgcGF0aDogYC8ke3RoaXMuaWR9YCxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBzdGF0ZSB9KSxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnIH0sXG4gICAgICAgIHJlc3BvbnNlVHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSk7XG4gICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhgU3VjY2Vzc2Z1bGx5IGFib3J0ZWQgam9iICR7dGhpcy5pZH1gKTtcbiAgICAgIHRoaXMuZW1pdCgnYWJvcnRlZCcpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFBvbGwgZm9yIHRoZSBzdGF0ZSBvZiB0aGUgcHJvY2Vzc2luZyBmb3IgdGhlIGpvYi5cbiAgICpcbiAgICogVGhpcyBtZXRob2Qgd2lsbCBvbmx5IHRocm93IGFmdGVyIGEgdGltZW91dC4gVG8gY2FwdHVyZSBhXG4gICAqIGpvYiBmYWlsdXJlIHdoaWxlIHBvbGxpbmcgeW91IG11c3Qgc2V0IGEgbGlzdGVuZXIgZm9yIHRoZVxuICAgKiBgZmFpbGVkYCBldmVudCBiZWZvcmUgY2FsbGluZyBpdDpcbiAgICpcbiAgICogam9iLm9uKCdmYWlsZWQnLCAoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpXG4gICAqIGF3YWl0IGpvYi5wb2xsKClcbiAgICpcbiAgICogQHBhcmFtIGludGVydmFsIFBvbGxpbmcgaW50ZXJ2YWwgaW4gbWlsbGlzZWNvbmRzXG4gICAqIEBwYXJhbSB0aW1lb3V0IFBvbGxpbmcgdGltZW91dCBpbiBtaWxsaXNlY29uZHNcbiAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59IEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGpvYiBmaW5pc2hlcyBzdWNjZXNzZnVsbHlcbiAgICovXG4gIGFzeW5jIHBvbGwoXG4gICAgaW50ZXJ2YWw6IG51bWJlciA9IHRoaXMucG9sbGluZ09wdGlvbnMucG9sbEludGVydmFsLFxuICAgIHRpbWVvdXQ6IG51bWJlciA9IHRoaXMucG9sbGluZ09wdGlvbnMucG9sbFRpbWVvdXQsXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGpvYklkID0gdGhpcy5pZDtcbiAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IGVuZFRpbWUgPSBzdGFydFRpbWUgKyB0aW1lb3V0O1xuXG4gICAgaWYgKHRpbWVvdXQgPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBKb2JQb2xsaW5nVGltZW91dEVycm9yKFxuICAgICAgICBgU2tpcHBpbmcgcG9sbGluZyBiZWNhdXNlIG9mIHRpbWVvdXQgPSAwbXMuIEpvYiBJZCA9ICR7am9iSWR9YCxcbiAgICAgICAgam9iSWQsXG4gICAgICApO1xuICAgIH1cblxuICAgIHRoaXMubG9nZ2VyLmRlYnVnKCdTdGFydCBwb2xsaW5nIGZvciBqb2Igc3RhdHVzJyk7XG4gICAgdGhpcy5sb2dnZXIuZGVidWcoXG4gICAgICBgUG9sbGluZyBvcHRpb25zOiB0aW1lb3V0OiR7dGltZW91dH1tcyB8IGludGVydmFsOiAke2ludGVydmFsfW1zLmAsXG4gICAgKTtcblxuICAgIHdoaWxlIChlbmRUaW1lID4gRGF0ZS5ub3coKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5jaGVjaygpO1xuICAgICAgICBzd2l0Y2ggKHJlcy5zdGF0ZSkge1xuICAgICAgICAgIGNhc2UgJ09wZW4nOlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAnSm9iIGlzIHN0aWxsIG9wZW4uIE1ha2Ugc3VyZSBjbG9zZSB0aGUgam9iIGJ5IGBjbG9zZWAgbWV0aG9kIG9uIHRoZSBqb2IgaW5zdGFuY2UgYmVmb3JlIHBvbGxpbmcuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgY2FzZSAnQWJvcnRlZCc6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0pvYiBoYXMgYmVlbiBhYm9ydGVkJyk7XG4gICAgICAgICAgY2FzZSAnVXBsb2FkQ29tcGxldGUnOlxuICAgICAgICAgIGNhc2UgJ0luUHJvZ3Jlc3MnOlxuICAgICAgICAgICAgdGhpcy5lbWl0KCdpblByb2dyZXNzJywgcmVzKTtcbiAgICAgICAgICAgIGF3YWl0IGRlbGF5KGludGVydmFsKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ0ZhaWxlZCc6XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhyZXMpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICBgSW5nZXN0IGpvYiBmYWlsZWQgdG8gY29tcGxldGUgZHVlIHRvOiAke3Jlcy5lcnJvck1lc3NhZ2V9YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgY2FzZSAnSm9iQ29tcGxldGUnOlxuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYEpvYiAke3RoaXMuaWR9IHdhcyBzdWNjZXNzZnVsbHkgcHJvY2Vzc2VkLmApO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdqb2JDb21wbGV0ZScsIHJlcyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHRpbWVvdXRFcnJvciA9IG5ldyBKb2JQb2xsaW5nVGltZW91dEVycm9yKFxuICAgICAgYFBvbGxpbmcgdGltZWQgb3V0IGFmdGVyICR7dGltZW91dH1tcy4gSm9iIElkID0gJHtqb2JJZH1gLFxuICAgICAgam9iSWQsXG4gICAgKTtcbiAgICB0aGlzLmVtaXQoJ2Vycm9yJywgdGltZW91dEVycm9yKTtcbiAgICB0aHJvdyB0aW1lb3V0RXJyb3I7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgdGhlIGxhdGVzdCBiYXRjaCBzdGF0dXMgaW4gc2VydmVyXG4gICAqL1xuICBhc3luYyBjaGVjaygpOiBQcm9taXNlPEpvYkluZm9WMj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBqb2JJbmZvID0gYXdhaXQgdGhpcy5jcmVhdGVJbmdlc3RSZXF1ZXN0PEpvYkluZm9WMj4oe1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBwYXRoOiBgLyR7dGhpcy5pZH1gLFxuICAgICAgICByZXNwb25zZVR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIH0pO1xuICAgICAgdGhpcy5qb2JJbmZvID0gam9iSW5mbztcbiAgICAgIHJldHVybiBqb2JJbmZvO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG5cbiAgLyoqIFJldHVybiBhbGwgcmVjb3JkIHJlc3VsdHNcbiAgICpcbiAgICogVGhpcyBtZXRob2Qgd2lsbCByZXR1cm4gc3VjY2Vzc2Z1bCwgZmFpbGVkIGFuZCB1bnByb2Nlc3NlZCByZWNvcmRzXG4gICAqXG4gICAqIEByZXR1cm5zIFByb21pc2U8SW5nZXN0Sm9iVjJSZXN1bHRzPlxuICAgKi9cbiAgcHVibGljIGFzeW5jIGdldEFsbFJlc3VsdHMoKTogUHJvbWlzZTxJbmdlc3RKb2JWMlJlc3VsdHM8Uz4+IHtcbiAgICBjb25zdCBbXG4gICAgICBzdWNjZXNzZnVsUmVzdWx0cyxcbiAgICAgIGZhaWxlZFJlc3VsdHMsXG4gICAgICB1bnByb2Nlc3NlZFJlY29yZHMsXG4gICAgXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIHRoaXMuZ2V0U3VjY2Vzc2Z1bFJlc3VsdHMoKSxcbiAgICAgIHRoaXMuZ2V0RmFpbGVkUmVzdWx0cygpLFxuICAgICAgdGhpcy5nZXRVbnByb2Nlc3NlZFJlY29yZHMoKSxcbiAgICBdKTtcbiAgICByZXR1cm4geyBzdWNjZXNzZnVsUmVzdWx0cywgZmFpbGVkUmVzdWx0cywgdW5wcm9jZXNzZWRSZWNvcmRzIH07XG4gIH1cblxuICAvKiogUmV0dXJuIHN1Y2Nlc3NmdWwgcmVzdWx0c1xuICAgKlxuICAgKiBUaGUgb3JkZXIgb2YgcmVjb3JkcyByZXR1cm5lZCBpcyBub3QgZ3VhcmFudGVlZCB0byBtYXRjaCB0aGUgb3JkZXJpbmcgb2YgdGhlIHVwbG9hZGVkIGRhdGEuXG4gICAqXG4gICAqIEByZXR1cm5zIFByb21pc2U8SW5nZXN0Sm9iVjJTdWNjZXNzZnVsUmVzdWx0cz5cbiAgICovXG4gIGFzeW5jIGdldFN1Y2Nlc3NmdWxSZXN1bHRzKCk6IFByb21pc2U8SW5nZXN0Sm9iVjJTdWNjZXNzZnVsUmVzdWx0czxTPj4ge1xuICAgIGlmICh0aGlzLmJ1bGtKb2JTdWNjZXNzZnVsUmVzdWx0cykge1xuICAgICAgcmV0dXJuIHRoaXMuYnVsa0pvYlN1Y2Nlc3NmdWxSZXN1bHRzO1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCB0aGlzLmNyZWF0ZUluZ2VzdFJlcXVlc3Q8XG4gICAgICBJbmdlc3RKb2JWMlN1Y2Nlc3NmdWxSZXN1bHRzPFM+IHwgdW5kZWZpbmVkXG4gICAgPih7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgcGF0aDogYC8ke3RoaXMuaWR9L3N1Y2Nlc3NmdWxSZXN1bHRzYCxcbiAgICAgIHJlc3BvbnNlVHlwZTogJ3RleHQvY3N2JyxcbiAgICB9KTtcblxuICAgIHRoaXMuYnVsa0pvYlN1Y2Nlc3NmdWxSZXN1bHRzID0gcmVzdWx0cyA/PyBbXTtcblxuICAgIHJldHVybiB0aGlzLmJ1bGtKb2JTdWNjZXNzZnVsUmVzdWx0cztcbiAgfVxuXG4gIC8qKiBSZXR1cm4gZmFpbGVkIHJlc3VsdHNcbiAgICpcbiAgICogVGhlIG9yZGVyIG9mIHJlY29yZHMgaW4gdGhlIHJlc3BvbnNlIGlzIG5vdCBndWFyYW50ZWVkIHRvIG1hdGNoIHRoZSBvcmRlcmluZyBvZiByZWNvcmRzIGluIHRoZSBvcmlnaW5hbCBqb2IgZGF0YS5cbiAgICpcbiAgICogQHJldHVybnMgUHJvbWlzZTxJbmdlc3RKb2JWMlN1Y2Nlc3NmdWxSZXN1bHRzPlxuICAgKi9cbiAgYXN5bmMgZ2V0RmFpbGVkUmVzdWx0cygpOiBQcm9taXNlPEluZ2VzdEpvYlYyRmFpbGVkUmVzdWx0czxTPj4ge1xuICAgIGlmICh0aGlzLmJ1bGtKb2JGYWlsZWRSZXN1bHRzKSB7XG4gICAgICByZXR1cm4gdGhpcy5idWxrSm9iRmFpbGVkUmVzdWx0cztcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5jcmVhdGVJbmdlc3RSZXF1ZXN0PFxuICAgICAgSW5nZXN0Sm9iVjJGYWlsZWRSZXN1bHRzPFM+IHwgdW5kZWZpbmVkXG4gICAgPih7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgcGF0aDogYC8ke3RoaXMuaWR9L2ZhaWxlZFJlc3VsdHNgLFxuICAgICAgcmVzcG9uc2VUeXBlOiAndGV4dC9jc3YnLFxuICAgIH0pO1xuXG4gICAgdGhpcy5idWxrSm9iRmFpbGVkUmVzdWx0cyA9IHJlc3VsdHMgPz8gW107XG5cbiAgICByZXR1cm4gdGhpcy5idWxrSm9iRmFpbGVkUmVzdWx0cztcbiAgfVxuXG4gIC8qKiBSZXR1cm4gdW5wcm9jZXNzZWQgcmVzdWx0c1xuICAgKlxuICAgKiBUaGUgdW5wcm9jZXNzZWQgcmVjb3JkcyBlbmRwb2ludCByZXR1cm5zIHJlY29yZHMgYXMgYSBDU1YuXG4gICAqIElmIHRoZSByZXF1ZXN0IGhlbHBlciBpcyBhYmxlIHRvIHBhcnNlIGl0LCB5b3UgZ2V0IHRoZSByZWNvcmRzXG4gICAqIGFzIGFuIGFycmF5IG9mIG9iamVjdHMuXG4gICAqIElmIHVuYWJsZSB0byBwYXJzZSB0aGUgaXQgKGJhZCBDU1YpLCB5b3UgZ2V0IHRoZSByYXcgcmVzcG9uc2UgYXMgYSBzdHJpbmcuXG4gICAqXG4gICAqIFRoZSBvcmRlciBvZiByZWNvcmRzIGluIHRoZSByZXNwb25zZSBpcyBub3QgZ3VhcmFudGVlZCB0byBtYXRjaCB0aGUgb3JkZXJpbmcgb2YgcmVjb3JkcyBpbiB0aGUgb3JpZ2luYWwgam9iIGRhdGEuXG4gICAqXG4gICAqIEByZXR1cm5zIFByb21pc2U8SW5nZXN0Sm9iVjJVbnByb2Nlc3NlZFJlY29yZHM+XG4gICAqL1xuICBhc3luYyBnZXRVbnByb2Nlc3NlZFJlY29yZHMoKTogUHJvbWlzZTxJbmdlc3RKb2JWMlVucHJvY2Vzc2VkUmVjb3JkczxTPj4ge1xuICAgIGlmICh0aGlzLmJ1bGtKb2JVbnByb2Nlc3NlZFJlY29yZHMpIHtcbiAgICAgIHJldHVybiB0aGlzLmJ1bGtKb2JVbnByb2Nlc3NlZFJlY29yZHM7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHRoaXMuY3JlYXRlSW5nZXN0UmVxdWVzdDxcbiAgICAgIEluZ2VzdEpvYlYyVW5wcm9jZXNzZWRSZWNvcmRzPFM+IHwgdW5kZWZpbmVkXG4gICAgPih7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgcGF0aDogYC8ke3RoaXMuaWR9L3VucHJvY2Vzc2VkcmVjb3Jkc2AsXG4gICAgICByZXNwb25zZVR5cGU6ICd0ZXh0L2NzdicsXG4gICAgfSk7XG5cbiAgICB0aGlzLmJ1bGtKb2JVbnByb2Nlc3NlZFJlY29yZHMgPSByZXN1bHRzID8/IFtdO1xuXG4gICAgcmV0dXJuIHRoaXMuYnVsa0pvYlVucHJvY2Vzc2VkUmVjb3JkcztcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGVzIGFuIGluZ2VzdCBqb2IuXG4gICAqL1xuICBhc3luYyBkZWxldGUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlSW5nZXN0UmVxdWVzdDx2b2lkPih7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgcGF0aDogYC8ke3RoaXMuaWR9YCxcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlSW5nZXN0UmVxdWVzdDxUPihyZXF1ZXN0OiBCdWxrUmVxdWVzdCkge1xuICAgIGNvbnN0IHsgcGF0aCwgcmVzcG9uc2VUeXBlIH0gPSByZXF1ZXN0O1xuICAgIGNvbnN0IGJhc2VQYXRoID0gYC9zZXJ2aWNlcy9kYXRhL3Yke3RoaXMuY29ubmVjdGlvbi52ZXJzaW9ufS9qb2JzL2luZ2VzdGA7XG5cbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKFxuICAgICAgcGF0aCA/IGJhc2VQYXRoICsgcGF0aCA6IGJhc2VQYXRoLFxuICAgICAgdGhpcy5jb25uZWN0aW9uLmluc3RhbmNlVXJsLFxuICAgICkudG9TdHJpbmcoKTtcblxuICAgIHJldHVybiBuZXcgQnVsa0FwaVYyKHRoaXMuY29ubmVjdGlvbiwgeyByZXNwb25zZVR5cGUgfSkucmVxdWVzdDxUPih7XG4gICAgICAuLi5yZXF1ZXN0LFxuICAgICAgdXJsLFxuICAgIH0pO1xuICB9XG59XG5cbmNsYXNzIEpvYkRhdGFWMjxTIGV4dGVuZHMgU2NoZW1hPiBleHRlbmRzIFdyaXRhYmxlIHtcbiAgcmVhZG9ubHkgam9iOiBJbmdlc3RKb2JWMjxTPjtcbiAgcmVhZG9ubHkgdXBsb2FkU3RyZWFtOiBTZXJpYWxpemFibGU7XG4gIHJlYWRvbmx5IGRvd25sb2FkU3RyZWFtOiBQYXJzYWJsZTtcbiAgcmVhZG9ubHkgZGF0YVN0cmVhbTogRHVwbGV4O1xuICByZXN1bHQ6IGFueTtcblxuICAvKipcbiAgICpcbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IENyZWF0ZUpvYkRhdGFWMk9wdGlvbnM8Uz4pIHtcbiAgICBzdXBlcih7IG9iamVjdE1vZGU6IHRydWUgfSk7XG5cbiAgICBjb25zdCBjcmVhdGVSZXF1ZXN0ID0gb3B0aW9ucy5jcmVhdGVSZXF1ZXN0O1xuXG4gICAgdGhpcy5qb2IgPSBvcHRpb25zLmpvYjtcbiAgICB0aGlzLnVwbG9hZFN0cmVhbSA9IG5ldyBTZXJpYWxpemFibGUoKTtcbiAgICB0aGlzLmRvd25sb2FkU3RyZWFtID0gbmV3IFBhcnNhYmxlKCk7XG5cbiAgICBjb25zdCBjb252ZXJ0ZXJPcHRpb25zID0geyBudWxsVmFsdWU6ICcjTi9BJyB9O1xuICAgIGNvbnN0IHVwbG9hZERhdGFTdHJlYW0gPSB0aGlzLnVwbG9hZFN0cmVhbS5zdHJlYW0oJ2NzdicsIGNvbnZlcnRlck9wdGlvbnMpO1xuICAgIGNvbnN0IGRvd25sb2FkRGF0YVN0cmVhbSA9IHRoaXMuZG93bmxvYWRTdHJlYW0uc3RyZWFtKFxuICAgICAgJ2NzdicsXG4gICAgICBjb252ZXJ0ZXJPcHRpb25zLFxuICAgICk7XG5cbiAgICB0aGlzLmRhdGFTdHJlYW0gPSBjb25jYXRTdHJlYW1zQXNEdXBsZXgoXG4gICAgICB1cGxvYWREYXRhU3RyZWFtLFxuICAgICAgZG93bmxvYWREYXRhU3RyZWFtLFxuICAgICk7XG5cbiAgICB0aGlzLm9uKCdmaW5pc2gnLCAoKSA9PiB0aGlzLnVwbG9hZFN0cmVhbS5lbmQoKSk7XG5cbiAgICB1cGxvYWREYXRhU3RyZWFtLm9uY2UoJ3JlYWRhYmxlJywgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gcGlwZSB1cGxvYWQgZGF0YSB0byBiYXRjaCBBUEkgcmVxdWVzdCBzdHJlYW1cbiAgICAgICAgY29uc3QgcmVxID0gY3JlYXRlUmVxdWVzdCh7XG4gICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICBwYXRoOiBgLyR7dGhpcy5qb2IuaWR9L2JhdGNoZXNgLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAndGV4dC9jc3YnLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVzcG9uc2VUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgncmVzcG9uc2UnLCByZXMpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICAgICAgfVxuICAgICAgICB9KSgpO1xuXG4gICAgICAgIHVwbG9hZERhdGFTdHJlYW0ucGlwZShyZXEuc3RyZWFtKCkpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgX3dyaXRlKHJlY29yZF86IFJlY29yZCwgZW5jOiBCdWZmZXJFbmNvZGluZywgY2I6ICgpID0+IHZvaWQpIHtcbiAgICBjb25zdCB7IElkLCB0eXBlLCBhdHRyaWJ1dGVzLCAuLi5ycmVjIH0gPSByZWNvcmRfO1xuICAgIGxldCByZWNvcmQ7XG4gICAgc3dpdGNoICh0aGlzLmpvYi5nZXRJbmZvKCkub3BlcmF0aW9uKSB7XG4gICAgICBjYXNlICdpbnNlcnQnOlxuICAgICAgICByZWNvcmQgPSBycmVjO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICBjYXNlICdoYXJkRGVsZXRlJzpcbiAgICAgICAgcmVjb3JkID0geyBJZCB9O1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJlY29yZCA9IHsgSWQsIC4uLnJyZWMgfTtcbiAgICB9XG4gICAgdGhpcy51cGxvYWRTdHJlYW0ud3JpdGUocmVjb3JkLCBlbmMsIGNiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGR1cGxleCBzdHJlYW0gd2hpY2ggYWNjZXB0cyBDU1YgZGF0YSBpbnB1dCBhbmQgYmF0Y2ggcmVzdWx0IG91dHB1dFxuICAgKi9cbiAgc3RyZWFtKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGFTdHJlYW07XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBiYXRjaCBvcGVyYXRpb25cbiAgICovXG4gIGV4ZWN1dGUoaW5wdXQ/OiBzdHJpbmcgfCBSZWNvcmRbXSB8IFJlYWRhYmxlKSB7XG4gICAgaWYgKHRoaXMucmVzdWx0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGEgY2FuIG9ubHkgYmUgdXBsb2FkZWQgdG8gYSBqb2Igb25jZS4nKTtcbiAgICB9XG5cbiAgICB0aGlzLnJlc3VsdCA9IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMub25jZSgncmVzcG9uc2UnLCAoKSA9PiByZXNvbHZlKCkpO1xuICAgICAgdGhpcy5vbmNlKCdlcnJvcicsIHJlamVjdCk7XG4gICAgfSk7XG5cbiAgICBpZiAoaXMubm9kZVN0cmVhbShpbnB1dCkpIHtcbiAgICAgIC8vIGlmIGlucHV0IGhhcyBzdHJlYW0uUmVhZGFibGUgaW50ZXJmYWNlXG4gICAgICBpbnB1dC5waXBlKHRoaXMuZGF0YVN0cmVhbSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHJlY29yZERhdGEgPSBzdHJ1Y3R1cmVkQ2xvbmUoaW5wdXQpO1xuXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShyZWNvcmREYXRhKSkge1xuICAgICAgICBmb3IgKGNvbnN0IHJlY29yZCBvZiByZWNvcmREYXRhKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMocmVjb3JkKSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiByZWNvcmRba2V5XSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICAgIHJlY29yZFtrZXldID0gU3RyaW5nKHJlY29yZFtrZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy53cml0ZShyZWNvcmQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW5kKCk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiByZWNvcmREYXRhID09PSAnc3RyaW5nJykge1xuICAgICAgICB0aGlzLmRhdGFTdHJlYW0ud3JpdGUocmVjb3JkRGF0YSwgJ3V0ZjgnKTtcbiAgICAgICAgdGhpcy5kYXRhU3RyZWFtLmVuZCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRlbGF5KG1zOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG59XG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuLypcbiAqIFJlZ2lzdGVyIGhvb2sgaW4gY29ubmVjdGlvbiBpbnN0YW50aWF0aW9uIGZvciBkeW5hbWljYWxseSBhZGRpbmcgdGhpcyBBUEkgbW9kdWxlIGZlYXR1cmVzXG4gKi9cbnJlZ2lzdGVyTW9kdWxlKCdidWxrMicsIChjb25uKSA9PiBuZXcgQnVsa1YyKGNvbm4pKTtcblxuZXhwb3J0IGRlZmF1bHQgQnVsa1YyO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxTQUFTQSxZQUFZLFFBQVEsUUFBUTtBQUNyQyxTQUEyQkMsUUFBUSxRQUFRLFFBQVE7QUFFbkQsU0FBU0MsWUFBWSxFQUFFQyxRQUFRLFFBQVEsa0JBQWtCO0FBQ3pELE9BQU9DLE9BQU8sTUFBTSxhQUFhO0FBRWpDLFNBQVNDLGNBQWMsUUFBUSxZQUFZO0FBRTNDLFNBQVNDLFNBQVMsUUFBZ0IsZ0JBQWdCO0FBQ2xELFNBQVNDLHFCQUFxQixRQUFRLGdCQUFnQjtBQUV0RCxPQUFPQyxFQUFFLE1BQU0sa0JBQWtCO0FBQUMsSUFnSTVCQyxzQkFBc0IsMEJBQUFDLE1BQUE7RUFHMUI7QUFDRjtBQUNBO0VBQ0UsU0FBQUQsdUJBQVlFLE9BQWUsRUFBRUMsS0FBYSxFQUFFO0lBQUEsSUFBQUMsS0FBQTtJQUFBQyxlQUFBLE9BQUFMLHNCQUFBO0lBQzFDSSxLQUFBLEdBQUFFLFVBQUEsT0FBQU4sc0JBQUEsR0FBTUUsT0FBTztJQUNiRSxLQUFBLENBQUtHLElBQUksR0FBRyxtQkFBbUI7SUFDL0JILEtBQUEsQ0FBS0QsS0FBSyxHQUFHQSxLQUFLO0lBQUMsT0FBQUMsS0FBQTtFQUNyQjtFQUFDSSxTQUFBLENBQUFSLHNCQUFBLEVBQUFDLE1BQUE7RUFBQSxPQUFBUSxZQUFBLENB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